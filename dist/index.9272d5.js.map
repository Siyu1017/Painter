{"version":3,"file":"index.9272d5.js","mappings":"yBAKa,IAAIA,EAAE,CAACC,EAAEC,IAAI,GAAIA,EAAEC,SAASC,iBAAiBH,GAAGE,SAASE,cAAcJ,GAEpF,QAF+F,CAACA,EAAEC,KAAK,GAAGA,EAAEA,GAAG,CAAC,EAAE,iBAAiBF,EAAEC,IAAI,OAAOD,EAAEC,GAAG,OAAOK,QAAQC,KAAK,0DAA0D,GAAGL,GAAG,oBAAoBM,OAAOC,UAAUC,SAASC,KAAKT,GAAG,OAAOI,QAAQC,KAAK,6CAA6C,IAAIK,EAAEZ,EAAEC,GAAGY,EAAE,CAACC,KAAKZ,EAAEY,MAAMC,OAAOC,IAAId,EAAEc,KAAKD,OAAOE,KAAKf,EAAEe,MAAMF,QAAQG,EAAE,CAACC,UAAU,CAACC,OAAOR,EAAES,MAAM,CAAC,YAAY,eAAeC,SAAS,CAACF,OAAOP,EAAEI,KAAKI,MAAM,CAAC,YAAY,cAAcE,QAAQ,CAACH,OAAOP,EAAEG,IAAIK,MAAM,CAAC,UAAU,aAAaG,QAAQ,CAACJ,OAAOP,EAAEC,KAAKO,MAAM,CAAC,UAAwWI,EAAE,CAACC,OAAO,YAAYC,SAAS,WAAWH,QAAQ,aAA+I,MAAM,CAACI,GAAtiB,SAAW3B,EAAEC,GAAG,GAAIgB,EAAEW,eAAe5B,IAAIiB,EAAEjB,GAAGoB,MAAMS,SAAQlB,IAAIM,EAAEjB,GAAGmB,OAAOW,iBAAiBnB,GAAEX,GAAGC,EAAED,IAAE,GAAG,EAAkc+B,KAAlG,SAAW/B,EAAEC,EAAEU,GAAG,GAAIa,EAAEI,eAAe5B,IAAI,OAAOC,GAAGA,EAAE6B,iBAAiBN,EAAExB,IAAGA,GAAGW,EAAEX,IAAG,EAAoBgC,OAArJ,SAAWhC,GAAGiC,SAASjC,EAAE,GAAIA,EAAE,GAAIiC,QAAQ,EAAkH,ECLlqC,SAASC,EAAeC,EAAQC,EAAGC,GAC9C,MAAMC,EAAQxB,OAAOyB,kBAAoB,EAOzC,OANAJ,EAAOK,MAAQJ,EAAIE,EACnBH,EAAOM,OAASJ,EAAIC,EACpBH,EAAOO,MAAMF,MAAQ,GAAGJ,MACxBD,EAAOO,MAAMD,OAAS,GAAGJ,MACbF,EAAOQ,WAAW,MAC1BC,MAAMN,EAAOA,GACVH,CACX,CCDA,SAASU,EAASC,EAAQC,GAItB,IAHA,IATiBC,EAAIC,EAAWC,EAC5BC,EACAC,EACAC,EACAC,EAKAC,EAAO,EACPC,EAAQ,EAEHC,EAAI,EAAGA,EAAIX,EAAOY,OAAS,EAAGD,IAAK,CACxC,IAAIE,GAbSX,EAaOF,EAAOW,GAbVR,EAacH,EAAO,QAZtCK,OACAC,OACAC,OACAC,EAHAH,GAD4BD,EAacJ,EAAOA,EAAOY,OAAS,IAZpDE,EAAIX,EAAUW,EAC3BR,EAAKF,EAAQW,EAAIZ,EAAUY,EAC3BR,EAAeS,KAAKC,KAAKZ,EAAKA,EAAKC,EAAKA,GACxCE,GAAYF,EAAKJ,EAAGY,EAAIT,EAAKH,EAAGa,EAAIX,EAAQU,EAAIX,EAAUY,EAAIX,EAAQW,EAAIZ,EAAUW,GAAKP,EACtFS,KAAKE,IAAIV,IASRK,EAAIJ,IACJA,EAAOI,EACPH,EAAQC,EAEhB,CAEA,GAAIF,EAAOR,EAAS,CAChB,IAAIkB,EAAOnB,EAAOoB,MAAM,EAAGV,EAAQ,GAC/BW,EAAQrB,EAAOoB,MAAMV,GACrBY,EAAiBvB,EAASoB,EAAMlB,GAChCsB,EAAkBxB,EAASsB,EAAOpB,GAEtC,OAAOqB,EAAeF,MAAM,EAAGE,EAAeV,OAAS,GAAGY,OAAOD,EACrE,CAEA,MAAO,CAACvB,EAAO,GAAIA,EAAOA,EAAOY,OAAS,GAC9C,CAEe,SAASa,EAAoBzB,EAAQ0B,GAChD,IAAIC,EAAmB5B,EAASC,EAAQ,GAExC0B,EAAIE,YACJF,EAAIG,OAAOF,EAAiB,GAAGb,EAAGa,EAAiB,GAAGZ,GAEtD,IAAK,IAAIJ,EAAI,EAAGA,EAAIgB,EAAiBf,OAAS,EAAGD,IAAK,CAClD,IAAImB,GAAMH,EAAiBhB,GAAGG,EAAIa,EAAiBhB,EAAI,GAAGG,GAAK,EAC3DiB,GAAMJ,EAAiBhB,GAAGI,EAAIY,EAAiBhB,EAAI,GAAGI,GAAK,EAC/DW,EAAIM,iBAAiBL,EAAiBhB,GAAGG,EAAGa,EAAiBhB,GAAGI,EAAGe,EAAIC,EAC3E,CAEAL,EAAIO,OAAON,EAAiBA,EAAiBf,OAAS,GAAGE,EAAGa,EAAiBA,EAAiBf,OAAS,GAAGG,GAC1GW,EAAIQ,QACR,CCrCA,IAAIC,EAAS,CAAC,eAAgB,kBAAmB,kBAAmB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,mBAAoB,mBAAoB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,mBAAoB,oBAAqB,oBAAqB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,qBAAsB,mBAAoB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,oBAAqB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,oBAAqB,kBAAmB,kBAAmB,kBAAmB,iBAAkB,iBAAkB,iBAAkB,kBAAmB,kBAAmB,iBAAkB,mBAEl6CC,EAAQ,CACRC,WAAY,CACR3C,MAAO,IACPC,OAAQ,KAEZ2C,QAAS,GACTC,OAAQ,CACJC,SAAS,EACTC,KAAM,OACNC,UAAU,EACVvD,UAAU,GAEdwD,MAAO,CACHC,OAAQ,CACJC,MAAOV,EAAO,IACdW,KAAM,GAEVC,KAAM,CACFF,MAAO,SAGfG,KAAM,CACFC,MAAO,CACHnC,EAAG,EACHC,EAAG,GAEPmC,OAAQ,GACRZ,QAAS,GACTa,aAAc,CACVrC,EAAG,CAAC,EAAG,GACPC,EAAG,CAAC,EAAG,IAEXqC,OAAQ,EACRC,QAAS,IAEbC,MAAO,CACHC,IAAK,GACLC,IAAK,GAETC,UAAW,kBAyBX,EAAI,CAACC,EAAGC,IAAoB,GAALA,EAAYvG,SAASC,iBAAiBqG,GAAKtG,SAASE,cAAcoG,GAEzFE,GAAkB,EAClBC,EAAc,KAElB,EAAE,wBAAwB7E,iBAAiB,SAAS,KAChDoD,EAAMG,OAAOE,KAAO,QAAQ,IAGhC,EAAE,sBAAsBzD,iBAAiB,SAAS,KAC9CoD,EAAMG,OAAOE,KAAO,OACpBoB,EAAc,KACdzE,EAAe0E,GAAI1B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC5DP,EAAe2E,OAAQ3B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,OAAO,IAG3EvC,SAAS4B,iBAAiB,eAAgB9B,IACtCA,EAAE8G,gBAAgB,IAGtB,IAAIC,GAAsB,EACtBC,EAAe,KACfC,EAAiB,EAmJrB,SAASC,EAAWC,EAAIC,EAAOC,EAASC,GACpC,IAAInF,EAASgF,EACTI,EAAOH,EACI,GAAXC,GACAnF,EAAeC,EAAQ+C,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAEpE,MAAM+B,EAAMrC,EAAOQ,WAAW,MAC9B,GAAkB,GAAd2E,EAAiB,CACjB9C,EAAIgD,UAAYtC,EAAMO,MAAMC,OAAOE,KACnCpB,EAAIiD,YAAcvC,EAAMO,MAAMC,OAAOC,MACrCnB,EAAIkD,UAAYxC,EAAMO,MAAMC,OAAOC,MACnC,IAAIgC,EAAOJ,GACXA,EAAO,CAAC,GACHzE,OAAS6E,EACdJ,EAAKK,UAAY1C,EAAMqB,SAC3B,MACI/B,EAAIgD,UAAYD,EAAK7E,MAAMmF,YAC3BrD,EAAIiD,YAAcF,EAAK7E,MAAMoF,YAC7BtD,EAAIkD,UAAYxC,EAAMO,MAAMC,OAAOC,MAKvC,GAHAnB,EAAIuD,uBAAwB,EAC5BvD,EAAIwD,SAAW,QACfxD,EAAIyD,QAAU,QACY,GAAtBV,EAAKzE,OAAOY,OAAhB,CACA,GAA0B,GAAtB6D,EAAKzE,OAAOY,OAIZ,OAHAc,EAAIE,YACJF,EAAI0D,IAAIX,EAAKzE,OAAO,GAAGc,EAAG2D,EAAKzE,OAAO,GAAGe,EAAGqB,EAAMO,MAAMC,OAAOE,KAAO,EAAG,EAAG,EAAI9B,KAAKqE,IAAI,QACzF3D,EAAI4D,OAGR,GAA0B,GAAtBb,EAAKzE,OAAOY,OAKZ,OAJAc,EAAIE,YACJF,EAAIG,OAAO4C,EAAKzE,OAAO,GAAGc,EAAG2D,EAAKzE,OAAO,GAAGe,GAC5CW,EAAIO,OAAOwC,EAAKzE,OAAO,GAAGc,EAAG2D,EAAKzE,OAAO,GAAGe,QAC5CW,EAAIQ,SAGR,GAAe,GAAXqC,EAAiB,CACjB,GAAsB,uBAAlBE,EAAKK,UACL,OAAOrD,EAAoBgD,EAAKzE,OAAQ0B,GACrC,GAAsB,kBAAlB+C,EAAKK,UACZ,OC/NG,SAAwB9E,EAAQ0B,GAC3C,IAAIC,EA7BR,SAAoB3B,EAAQC,GACxB,MAAMsF,EAAQvF,EAAO,GACf/B,EAAM+B,EAAOA,EAAOY,OAAS,GAS7Be,EAAmB,CAAC4D,GAE1B,IAAK,IAAI5E,EAAI,EAAGA,EAAIX,EAAOY,OAAS,EAAGD,IAAK,CACxC,MAAM6E,EAAQxF,EAAOW,GAhDRT,EAkDgBsF,EAlDZrF,EAkDmBoF,EAjDpClF,SACAC,SACAC,SACAC,SAHAH,GAD4BD,EAkDenC,GAjD9B6C,EAAIX,EAAUW,EAC3BR,EAAKF,EAAQW,EAAIZ,EAAUY,EAC3BR,EAAeS,KAAKC,KAAKZ,EAAKA,EAAKC,EAAKA,GACxCE,GAAYF,EAAKJ,EAAGY,EAAIT,EAAKH,EAAGa,EAAIX,EAAQU,EAAIX,EAAUY,EAAIX,EAAQW,EAAIZ,EAAUW,GAAKP,EACtFS,KAAKE,IAAIV,GA0D0B,GAVlCmB,EAAiB8D,KAAKD,EAE9B,CAvDJ,IAAqBtF,EAAIC,EAAWC,EAC5BC,EACAC,EACAC,EACAC,EAuDJ,OAFAmB,EAAiB8D,KAAKxH,GAEf0D,CACX,CAG2B+D,CAAW1F,GAElC0B,EAAIE,YACJF,EAAIG,OAAOF,EAAiB,GAAGb,EAAGa,EAAiB,GAAGZ,GAEtD,IAAK,IAAIJ,EAAI,EAAGA,EAAIgB,EAAiBf,OAAS,EAAGD,IAAK,CAClD,IAAImB,GAAMH,EAAiBhB,GAAGG,EAAIa,EAAiBhB,EAAI,GAAGG,GAAK,EAC3DiB,GAAMJ,EAAiBhB,GAAGI,EAAIY,EAAiBhB,EAAI,GAAGI,GAAK,EAC/DW,EAAIM,iBAAiBL,EAAiBhB,GAAGG,EAAGa,EAAiBhB,GAAGI,EAAGe,EAAIC,EAC3E,CAEAL,EAAIO,OAAON,EAAiBA,EAAiBf,OAAS,GAAGE,EAAGa,EAAiBA,EAAiBf,OAAS,GAAGG,GAC1GW,EAAIQ,QACR,CDiNmByD,CAAelB,EAAKzE,OAAQ0B,GAChC,GAAsB,qBAAlB+C,EAAKK,UACZ,OExQG,SAA2B9E,EAAQ0B,GAC9C,IAAIC,EApBR,SAAoB3B,EAAQ4F,GAIxB,IAHA,IALqBC,EAAIC,EAAIC,EAKzBC,EAAQ,GAGHrF,EAAI,EAAGA,EAAIX,EAAOY,OAAS,EAAGD,IAAK,CACxC,IAAIsF,GATaJ,EASU7F,EAAOW,EAAI,GATjBmF,EASqB9F,EAAOW,GATxBoF,EAS4B/F,EAAOW,EAAI,GAR7DK,KAAKE,KAAK2E,EAAG/E,GAAKgF,EAAG/E,EAAIgF,EAAGhF,GAAK+E,EAAGhF,GAAKiF,EAAGhF,EAAI8E,EAAG9E,GAAKgF,EAAGjF,GAAK+E,EAAG9E,EAAI+E,EAAG/E,IAAM,IASnFiF,EAAMP,KAAKQ,EACf,CAGA,KAAOD,EAAMpF,OAAS,GAAKI,KAAKwC,OAAOwC,GAUG,GAViB,CACvD,IAAIE,EAAWF,EAAMG,QAAQnF,KAAKwC,OAAOwC,IACzChG,EAAOoG,OAAOF,EAAW,EAAG,GAC5BF,EAAMI,OAAOF,EAAU,EAC3B,CAEA,OAAOlG,CACX,CAG2BqG,CAAWrG,GAElC0B,EAAIE,YACJF,EAAIG,OAAOF,EAAiB,GAAGb,EAAGa,EAAiB,GAAGZ,GAEtD,IAAK,IAAIJ,EAAI,EAAGA,EAAIgB,EAAiBf,OAAS,EAAGD,IAAK,CAClD,IAAImB,GAAMH,EAAiBhB,GAAGG,EAAIa,EAAiBhB,EAAI,GAAGG,GAAK,EAC3DiB,GAAMJ,EAAiBhB,GAAGI,EAAIY,EAAiBhB,EAAI,GAAGI,GAAK,EAC/DW,EAAIM,iBAAiBL,EAAiBhB,GAAGG,EAAGa,EAAiBhB,GAAGI,EAAGe,EAAIC,EAC3E,CAEAL,EAAIO,OAAON,EAAiBA,EAAiBf,OAAS,GAAGE,EAAGa,EAAiBA,EAAiBf,OAAS,GAAGG,GAC1GW,EAAIQ,QACR,CF0PmBoE,CAAkB7B,EAAKzE,OAAQ0B,EAE9C,CACA,IACI,IAAK,IAAIf,EAAI,EAAGA,EAAI8D,EAAKzE,OAAOY,OAAS,EAAGD,IACxCe,EAAIE,YACK,GAALjB,GACAe,EAAIG,OAAO4C,EAAKzE,OAAOW,GAAGG,EAAG2D,EAAKzE,OAAOW,GAAGI,GAC5CW,EAAIM,iBAAiByC,EAAKzE,OAAOW,EAAI,GAAGG,EAAG2D,EAAKzE,OAAOW,EAAI,GAAGI,EAAG0D,EAAKzE,OAAOW,EAAI,GAAGG,GAAK2D,EAAKzE,OAAOW,EAAI,GAAGG,EAAI2D,EAAKzE,OAAOW,EAAI,GAAGG,GAAK,EAAG2D,EAAKzE,OAAOW,EAAI,GAAGI,GAAK0D,EAAKzE,OAAOW,EAAI,GAAGI,EAAI0D,EAAKzE,OAAOW,EAAI,GAAGI,GAAK,IAC3MJ,GAAK8D,EAAKzE,OAAOY,OAAS,GACjCc,EAAIG,OAAO4C,EAAKzE,OAAOW,GAAGG,GAAK2D,EAAKzE,OAAOW,EAAI,GAAGG,EAAI2D,EAAKzE,OAAOW,GAAGG,GAAK,EAAG2D,EAAKzE,OAAOW,GAAGI,GAAK0D,EAAKzE,OAAOW,EAAI,GAAGI,EAAI0D,EAAKzE,OAAOW,GAAGI,GAAK,GAC5IW,EAAIM,iBAAiByC,EAAKzE,OAAOW,EAAI,GAAGG,EAAG2D,EAAKzE,OAAOW,EAAI,GAAGI,EAAG0D,EAAKzE,OAAOW,GAAGG,EAAgD,KAA3C2D,EAAKzE,OAAOW,EAAI,GAAGG,EAAI2D,EAAKzE,OAAOW,GAAGG,GAAW2D,EAAKzE,OAAOW,GAAGI,EAAgD,KAA3C0D,EAAKzE,OAAOW,EAAI,GAAGI,EAAI0D,EAAKzE,OAAOW,GAAGI,MAEhMW,EAAIG,OAAO4C,EAAKzE,OAAOW,GAAGG,GAAK2D,EAAKzE,OAAOW,EAAI,GAAGG,EAAI2D,EAAKzE,OAAOW,GAAGG,GAAK,EAAG2D,EAAKzE,OAAOW,GAAGI,GAAK0D,EAAKzE,OAAOW,EAAI,GAAGI,EAAI0D,EAAKzE,OAAOW,GAAGI,GAAK,GAC5IW,EAAIM,iBAAiByC,EAAKzE,OAAOW,EAAI,GAAGG,EAAG2D,EAAKzE,OAAOW,EAAI,GAAGI,EAAG0D,EAAKzE,OAAOW,EAAI,GAAGG,GAAK2D,EAAKzE,OAAOW,EAAI,GAAGG,EAAI2D,EAAKzE,OAAOW,EAAI,GAAGG,GAAK,EAAG2D,EAAKzE,OAAOW,EAAI,GAAGI,GAAK0D,EAAKzE,OAAOW,EAAI,GAAGI,EAAI0D,EAAKzE,OAAOW,EAAI,GAAGI,GAAK,IAEtNW,EAAIQ,QAEZ,CAAE,MAAOhF,GACLK,QAAQgJ,IAAI,UAAWrJ,EAC3B,CAxCmC,CAyCvC,CAEA,SAASsJ,EAAYC,GACjB,SAASC,EAAOrC,GACZ,IAAIsC,EAAOtC,EAAGuC,wBACVC,EAAa7I,OAAO8I,aAAe1J,SAAS2J,gBAAgBF,WAC5DG,EAAYhJ,OAAOiJ,aAAe7J,SAAS2J,gBAAgBC,UAC/D,MAAO,CAAEE,IAAKP,EAAKO,IAAMF,EAAW7F,KAAMwF,EAAKxF,KAAO0F,EAC1D,CACA,MAAO,CAAE/F,EAAG4F,EAAOD,GAAStF,KAAMJ,EAAG2F,EAAOD,GAASS,IACzD,CAEA,SAASC,IACL,IAAInH,EAASoC,EAAME,QACnB,GAAItC,EAAOY,OAAS,EAAG,MAAO,CAC1BwG,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAER,IAAIC,EAAS,CACTC,KAAMzH,EAAO,GAAiB,aAAEc,EAAE,GAClC4G,KAAM1H,EAAO,GAAiB,aAAEe,EAAE,GAClC4G,KAAM3H,EAAO,GAAiB,aAAEc,EAAE,GAClC8G,KAAM5H,EAAO,GAAiB,aAAEe,EAAE,IAgBtC,OAdAf,EAAOjB,SAAQyG,IACPA,EAAoB,aAAE1E,EAAE,IAAM0G,EAAOC,OACrCD,EAAOC,KAAOjC,EAAoB,aAAE1E,EAAE,IAEtC0E,EAAoB,aAAE1E,EAAE,IAAM0G,EAAOG,OACrCH,EAAOG,KAAOnC,EAAoB,aAAE1E,EAAE,IAEtC0E,EAAoB,aAAEzE,EAAE,IAAMyG,EAAOE,OACrCF,EAAOE,KAAOlC,EAAoB,aAAEzE,EAAE,IAEtCyE,EAAoB,aAAEzE,EAAE,IAAMyG,EAAOI,OACrCJ,EAAOI,KAAOpC,EAAoB,aAAEzE,EAAE,GAC1C,IAEG,CACHqG,GAAII,EAAOC,KACXH,GAAIE,EAAOG,KACXN,GAAIG,EAAOE,KACXH,GAAIC,EAAOI,KAEnB,CAEA,SAASC,EAAiBpB,EAAStD,EAAc2E,GAAU,EAAOC,GAAQ,GACzD,GAATA,GACA3I,EAAeqH,EAASrE,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAErE,IAAI+B,EAAM+E,EAAQ5G,WAAW,MAC7B6B,EAAIE,YAYJF,EAAIkD,UAAY,mBAChBlD,EAAIgD,UAAuB,GAAXoD,EAAkB,EAAI,IACtCpG,EAAIiD,YAAc,mBAClBjD,EAAIG,OAAOsB,EAAarC,EAAE,GAAIqC,EAAapC,EAAE,IAC7CW,EAAIO,OAAOkB,EAAarC,EAAE,GAAIqC,EAAapC,EAAE,IAC7CW,EAAIO,OAAOkB,EAAarC,EAAE,GAAIqC,EAAapC,EAAE,IAC7CW,EAAIO,OAAOkB,EAAarC,EAAE,GAAIqC,EAAapC,EAAE,IAC7CW,EAAIO,OAAOkB,EAAarC,EAAE,GAAIqC,EAAapC,EAAE,IAC7CW,EAAIQ,SAgBJR,EAAIsG,WACR,CA3SAhK,OAAOgB,iBAAiB,WAAY9B,IAChC,GAAIA,EAAE+K,QAAS,CAEX,GADA/K,EAAE8G,iBACyB,GAAvBC,EACA,OAEJ,GAAa,KAAT/G,EAAEgL,IACF,OAAOC,EAAKC,OACT,GAAa,KAATlL,EAAEgL,IACT,OAAOC,EAAKE,OACT,GAAInL,EAAEoL,UAAqB,KAATpL,EAAEgL,IACvB,OAAOK,GAEf,KAGJ,EAAE,WAAW,GAAMxJ,SAAQ7B,IACvBA,EAAE8B,iBAAiB,SAAS,KACxB4E,GAAkB,EAClB,EAAE,wBAAwB,GAAM7E,SAAQyJ,IACpCA,EAAEC,UAAUC,OAAO,SAAS,IAEhC,EAAE,kBAAkBxL,EAAEyL,aAAa,oBAAoBF,UAAUG,IAAI,SAAS,IAGlF1L,EAAE8B,iBAAiB,aAAa,KACL,GAAnB4E,IACA,EAAE,wBAAwB,GAAM7E,SAAQyJ,IACpCA,EAAEC,UAAUC,OAAO,SAAS,IAEhC,EAAE,kBAAkB,GAAM3J,SAAQyJ,IAC9BA,EAAEC,UAAUC,OAAO,SAAS,IAEhCxL,EAAEuL,UAAUG,IAAI,UAChB,EAAE,kBAAkB1L,EAAEyL,aAAa,oBAAoBF,UAAUG,IAAI,UACzE,GACF,IAGNxL,SAAS4B,iBAAiB,aAAc9B,IACpC,IAAIC,GAAI,EAMR,GALA,EAAE,WAAW,GAAM4B,SAAQ4E,IACnBA,EAAEkF,SAAS3L,EAAEmB,UACblB,GAAI,EACR,IAEK,GAALA,EAAJ,CACA,IAAI2L,GAAM,EACV,EAAE,iBAAiB,GAAM/J,SAAQyJ,IACzBA,EAAEK,SAAS3L,EAAEmB,UACbyK,GAAM,EACV,IAEO,GAAPA,GAAmC,GAAnBlF,IAChBA,GAAkB,EAClB,EAAE,kBAAkB,GAAM7E,SAAQyJ,IAC9BA,EAAEC,UAAUC,OAAO,SAAS,IAEhC,EAAE,wBAAwB,GAAM3J,SAAQ4E,IACpCA,EAAE8E,UAAUC,OAAO,SAAS,IAbf,CAerB,IAIJ,EAAE,SAAS,GAAM3J,SAAQ0D,IACrBA,EAAKzD,iBAAiB,SAAS,KAC3B,EAAE,gBAAgB,GAAMD,SAAQgK,IAC5BA,EAAON,UAAUC,OAAO,SAAS,IAErC,EAAE,sBAAsB,GAAM3J,SAAQiK,IAClCA,EAAMP,UAAUC,OAAO,SAAS,IAEpCjG,EAAKgG,UAAUG,IAAI,UACnBnG,EAAKnF,cAAc,gBAAiBmF,EAAKnF,cAAc,eAAemL,UAAUG,IAAI,SAAgB,GACvG,IAWLxL,SAAS4B,iBAAiB,aAAc9B,IACpC,IAAI8L,GAAQ,EACRC,GAAU,EAWd,GAVA,EAAE,gBAAgB,GAAMlK,SAAQyJ,IACxBA,EAAEK,SAAS3L,EAAEmB,UACb2K,GAAQ,EACZ,IAEJ,EAAE,SAAS,GAAMjK,SAAQmK,IACjBA,EAAEL,SAAS3L,EAAEmB,UACb4K,GAAU,EACd,IAES,GAATD,EAAgB,CAChB,GAAe,GAAXC,EAAiB,OACrB,EAAE,sBAAsB,GAAMlK,SAAQyJ,IAClCA,EAAEC,UAAUC,OAAO,SAAS,GAEpC,KAGJ,EAAE,SAASpE,MAAQlC,EAAMO,MAAMC,OAAOE,KAEtC,EAAE,SAAS9D,iBAAiB,UAAU,KAC9B,EAAE,SAASsF,MAAQlC,EAAMkB,MAAME,MAC/B,EAAE,SAASc,MAAQlC,EAAMkB,MAAME,KAE/B,EAAE,SAASc,MAAQlC,EAAMkB,MAAMC,MAC/B,EAAE,SAASe,MAAQlC,EAAMkB,MAAMC,KAEnCnB,EAAMO,MAAMC,OAAOE,KAAO,EAAE,SAASwB,KAAK,IAG9C,EAAE,kBAAkB1E,MAAMuJ,WAAa/G,EAAMO,MAAMC,OAAOC,MAE1D,EAAE,8BAA8B,GAAM9D,SAAQL,IAC1C,EAAE,uBAAuBA,EAAEiK,aAAa,iCAAiC,GAAM5J,SAAQ2E,IACnFA,EAAE1E,iBAAiB,SAAS,KACxB,EAAE,uBAAuB0E,EAAEiF,aAAa,mCAAmC,GAAM5J,SAAQqK,IACrFA,EAAIX,UAAUC,OAAO,WAAW,IAEpChF,EAAE+E,UAAUG,IAAI,YAChBxG,EAAMqB,UAAYC,EAAEiF,aAAa,oBAAoB,GACxD,GACJ,IAGLxG,EAAOpD,SAAQ,CAACsK,EAAG1I,KACf,IAAI2I,EAAKlM,SAASmM,cAAc,MAChCD,EAAGE,aAAa,aAAcH,GAC9BC,EAAGG,UAAY,cACfH,EAAGI,UAAY,2DAA2DL,YAC1EC,EAAGtK,iBAAiB,SAAS,KACzB,EAAE,kBAAkBY,MAAMuJ,WAAaE,EACvCjH,EAAMO,MAAMC,OAAOC,MAAQwG,CAAC,IAEhC,EAAE,WAAWM,YAAYL,EAAG,IA+JhC,IAAInB,EAAO,CACPyB,cAAe,EACfvK,OAAQ,EAAE,WACVwK,MAAO,EAAE,UACT9F,OAAQ,EAAE,WACVD,GAAI,EAAE,OACNgG,KAAM,EAAE,SACRC,KAAMC,UACF,EAAE,YAAYvB,UAAUC,OAAO,YAC/BoB,KAAKlK,MAAQ,UAAUwC,EAAMC,WAAW3C,mCAAmC0C,EAAMC,WAAW3C,qCAAqC0C,EAAMC,WAAW1C,YAClJN,OAAO4K,QAAS,EAChBJ,MAAMI,QAAS,EACfnG,GAAGmG,QAAS,EACZlG,OAAOkG,QAAS,EAChB7K,EAAeC,OAAQ+C,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAChEP,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAE/D,IAAIuK,EAAc,EAAQ,WAEtBC,EAAe,CACfrJ,EAAG,EACHC,EAAG,GAkFP,SAASqJ,EAAUlN,GACY,GAAvB+G,IACA7B,EAAME,QAAQ6B,GAAkBD,EAChC9E,EAAe0E,GAAI1B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC5DP,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC/DyC,EAAME,QAAQvD,SAAQ,CAACiB,EAAQW,KACvBA,EAAIwH,EAAKyB,cACbxF,EAAWyF,MAAO7J,GAAQ,EAAK,IAEnCoC,EAAMG,OAAOC,SAAU,GAE3B0B,EAAe,KACfD,GAAsB,CAC1B,CA2HA,SAASoG,EAAMnN,GACPA,EAAEoN,KAGsB,GAAxBlI,EAAMG,OAAOC,SAAwC,QAArBJ,EAAMG,OAAOE,OAC7CrD,EAAeC,OAAQ+C,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAEvC,GAArByC,EAAMY,KAAKI,SACXhB,EAAME,QAAUF,EAAMY,KAAKK,QAE3BjE,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAE/DyC,EAAME,QAAQvD,SAAQZ,IAClBiG,EAAWyF,MAAO1L,GAAG,EAAK,IAG9BiE,EAAMY,KAAKI,OAAS,EAEpBhB,EAAMY,KAAKK,QAAU,IAGzB8E,EAAKyB,eAILxH,EAAMY,KAAKG,aAAarC,EAAE,IAAMsB,EAAMO,MAAMC,OAAOE,KAAO,EAF5C,EAGdV,EAAMY,KAAKG,aAAarC,EAAE,IAAMsB,EAAMO,MAAMC,OAAOE,KAAO,EAH5C,EAIdV,EAAMY,KAAKG,aAAapC,EAAE,IAAMqB,EAAMO,MAAMC,OAAOE,KAAO,EAJ5C,EAKdV,EAAMY,KAAKG,aAAapC,EAAE,IAAMqB,EAAMO,MAAMC,OAAOE,KAAO,EAL5C,EAOdV,EAAMG,OAAOC,SAAU,EACvBJ,EAAME,QAAQmD,KAAK,CACf8E,SAAU,CACNzJ,EAAGsB,EAAMY,KAAKG,aAAarC,EAAE,GAC7BC,EAAGqB,EAAMY,KAAKG,aAAapC,EAAE,IAEjCyJ,KAAM,CACF9K,MAAO0C,EAAMY,KAAKG,aAAarC,EAAE,GAAKsB,EAAMY,KAAKG,aAAarC,EAAE,GAChEnB,OAAQyC,EAAMY,KAAKG,aAAapC,EAAE,GAAKqB,EAAMY,KAAKG,aAAapC,EAAE,IAErEnB,MAAO,CACHoF,YAAa5C,EAAMO,MAAMC,OAAOC,MAChCkC,YAAa3C,EAAMO,MAAMC,OAAOE,MAEpCgC,UAAW1C,EAAMqB,UACjBzD,OAAQoC,EAAMY,KAAKE,OACnB2G,MAAO,YACPY,OAAQ,EACR3K,MAAO,EACPqD,aAAcf,EAAMY,KAAKG,eAE7BiB,EAAWyF,MAAOzH,EAAMY,KAAKE,QAAQ,EAAM,GAC3C,EAAE,SAASsG,aAAa,WAAY,IAE5C,CA7QAU,EAAYrL,GAAG,aAAc3B,IACzB,GAAyB,UAArBkF,EAAMG,OAAOE,KAAkB,CAC/B,IAAIzC,EAASoC,EAAME,QACnB,GAAItC,EAAOY,OAAS,EAAG,OACvBxB,EAAe0E,GAAI1B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC5D,IAAI+K,EAAQ,CAAE5J,EAAG5D,EAAEyN,QAAUnE,EAAYzC,QAAQjD,EAAGC,EAAG7D,EAAE0N,QAAUpE,EAAYzC,QAAQhD,GACvFoJ,EAAe,CACXrJ,EAAG5D,EAAEyN,QACL5J,EAAG7D,EAAE0N,SAET,IAAIC,GAAI,EACJC,EAAK3D,IA2CT,GA1CAjD,EAAelE,EAAO,GACtBmE,EAAiB,EACjBnE,EAAOjB,SAAQ,CAACyJ,EAAG7H,KACXA,EAAIwH,EAAKyB,cACTpB,EAAgB,aAAE1H,EAAE,GAAK4J,EAAM5J,GAAK4J,EAAM5J,EAAI0H,EAAgB,aAAE1H,EAAE,IAAM0H,EAAgB,aAAEzH,EAAE,GAAK2J,EAAM3J,GAAK2J,EAAM3J,EAAIyH,EAAgB,aAAEzH,EAAE,KAC1I8J,GAAI,GACCC,EAAGxD,GAAKwD,EAAG1D,KAAO0D,EAAGvD,GAAKuD,EAAGzD,MAAQmB,EAAgB,aAAE1H,EAAE,GAAK0H,EAAgB,aAAE1H,EAAE,KAAO0H,EAAgB,aAAEzH,EAAE,GAAKyH,EAAgB,aAAEzH,EAAE,MACvImD,EAAesE,EACfrE,EAAiBxD,EACjBmK,EAAK,CACD1D,GAAIoB,EAAgB,aAAE1H,EAAE,GACxBuG,GAAImB,EAAgB,aAAEzH,EAAE,GACxBuG,GAAIkB,EAAgB,aAAE1H,EAAE,GACxByG,GAAIiB,EAAgB,aAAEzH,EAAE,KA0BpC,IAGK,GAAL8J,EAGA,OAFAhH,EAAc,UACdzE,EAAe2E,OAAQ3B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAGpEkE,EAAcK,EACdD,GAAsB,EACtB,IAAI8G,EAAY,IAAI3I,EAAME,SAC1BlD,EAAe0E,GAAI1B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC5DP,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC/DoL,EAAU3E,OAAOjC,EAAgB,GACjC4G,EAAUhM,SAAQ,CAACiB,EAAQW,KACnBA,EAAIwH,EAAKyB,aAAe,GAC5BxF,EAAWyF,MAAO7J,GAAQ,EAAK,IAEnCoE,EAAWN,GAAI1B,EAAME,QAAQ6B,IAAiB,GAC9C0D,EAAiB9D,OAAQ3B,EAAME,QAAQ6B,GAAgBhB,cAAc,EACzE,KAGJ+G,EAAYrL,GAAG,YAAa3B,KAoB5B,SAAoBA,GACW,GAAvB+G,IACA7E,EAAe0E,GAAI1B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC5DuE,EAAalE,OAAOjB,SAAQ,CAACyG,EAAO7E,KAChCuD,EAAalE,OAAOW,GAAK,CACrBG,EAAG0E,EAAM1E,EAAI5D,EAAEyN,QAAUR,EAAarJ,EACtCC,EAAGyE,EAAMzE,EAAI7D,EAAE0N,QAAUT,EAAapJ,EAC1C,IAEJmD,EAAaf,aAAarC,EAAE,IAAM5D,EAAEyN,QAAUR,EAAarJ,EAC3DoD,EAAaf,aAAarC,EAAE,IAAM5D,EAAEyN,QAAUR,EAAarJ,EAC3DoD,EAAaf,aAAapC,EAAE,IAAM7D,EAAE0N,QAAUT,EAAapJ,EAC3DmD,EAAaf,aAAapC,EAAE,IAAM7D,EAAE0N,QAAUT,EAAapJ,EAE3DqD,EAAWN,GAAII,GAAc,GAC7B2D,EAAiB9D,OAAQG,EAAaf,cAAc,GAIpDgH,EAAe,CACXrJ,EAAG5D,EAAEyN,QACL5J,EAAG7D,EAAE0N,SAGjB,CA5CoCI,CAAW9N,EAAE,IAEjDgN,EAAYrL,GAAG,WAAY3B,IAAQkN,GAAY,IAC/CF,EAAYrL,GAAG,WAAY3B,IAAQkN,GAAY,IA2C/C/K,OAAOL,iBAAiB,aAAc9B,IAClC,GAAyB,UAArBkF,EAAMG,OAAOE,MAA2C,GAAvBwB,EAArC,CACI,IAAIjE,EAAS,IAAIoC,EAAME,SACvB,KAAItC,EAAOY,OAAS,GAApB,CACAxB,EAAe2E,OAAQ3B,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAChE,IAAI+K,EAAQ,CAAE5J,EAAG5D,EAAEyN,QAAUnE,EAAYzC,QAAQjD,EAAGC,EAAG7D,EAAE0N,QAAUpE,EAAYzC,QAAQhD,GACnF8J,GAAI,EACJC,EAAK3D,IACL8D,EAASjL,EAAO,GA2CpB,GA1CAA,EAAOjB,SAAQ,CAACyJ,EAAG7H,KACXA,EAAIwH,EAAKyB,cACTpB,EAAgB,aAAE1H,EAAE,GAAK4J,EAAM5J,GAAK4J,EAAM5J,EAAI0H,EAAgB,aAAE1H,EAAE,IAAM0H,EAAgB,aAAEzH,EAAE,GAAK2J,EAAM3J,GAAK2J,EAAM3J,EAAIyH,EAAgB,aAAEzH,EAAE,KAC1I8J,GAAI,GACCC,EAAGxD,GAAKwD,EAAG1D,KAAO0D,EAAGvD,GAAKuD,EAAGzD,KAAOmB,EAAgB,aAAE1H,EAAE,GAAK0H,EAAgB,aAAE1H,EAAE,KAAO0H,EAAgB,aAAEzH,EAAE,GAAKyH,EAAgB,aAAEzH,EAAE,MACtIkK,EAASzC,EACTsC,EAAK,CACD1D,GAAIoB,EAAgB,aAAE1H,EAAE,GACxBuG,GAAImB,EAAgB,aAAEzH,EAAE,GACxBuG,GAAIkB,EAAgB,aAAE1H,EAAE,GACxByG,GAAIiB,EAAgB,aAAEzH,EAAE,KA0BpC,IAGe,MAAf8C,GACAgE,EAAiB9D,OAAQF,EAAYV,cAAc,GAE9C,GAAL0H,EAAJ,CACA,IAAI1H,EAAe,CACfrC,EAAG,CAACgK,EAAG1D,GAAI0D,EAAGxD,IACdvG,EAAG,CAAC+J,EAAGzD,GAAIyD,EAAGvD,KAEd1D,GAAeoH,GACfpD,EAAiB9D,OAAQZ,GAAc,GAAO,EAN5B,CAhDO,CA0DjC,KA0FJ,IAAI+H,EAAe,EAAQ,WAE3BA,EAAarM,GAAG,aAAc3B,IACZ,cAAVA,EAAEoN,MACFpN,EAAE8G,iBAEmB,QAArB5B,EAAMG,OAAOE,OACbL,EAAMG,OAAOC,SAAU,EACvBJ,EAAMY,KAAKE,OAAS,CAAC,CAAEpC,EAAG5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,EAAGC,EAAG7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,IAChGqB,EAAMY,KAAKC,MAAQ,CACfnC,EAAG,CAAC5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,GACpCC,EAAG,CAAC7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,IAExCqB,EAAMY,KAAKG,aAAe,CACtBrC,EAAG,CAAC5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,EAAG5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,GACvEC,EAAG,CAAC7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,EAAG7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,IAE3EqD,EAAW/E,OAAQ+C,EAAMY,KAAKE,QAAQ,EAAO,GACjD,IAGJgI,EAAarM,GAAG,YAAa3B,KA5G7B,SAAcA,GACI,aAAVA,EAAEoN,MACFpN,EAAE8G,iBAEsB,GAAxB5B,EAAMG,OAAOC,SAAwC,QAArBJ,EAAMG,OAAOE,OACzCvF,EAAEyN,QAAUnE,EAAYnH,QAAQyB,EAAIsB,EAAMY,KAAKG,aAAarC,EAAE,KAC9DsB,EAAMY,KAAKG,aAAarC,EAAE,GAAK5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,GAE/D5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,EAAIsB,EAAMY,KAAKG,aAAarC,EAAE,KAC9DsB,EAAMY,KAAKG,aAAarC,EAAE,GAAK5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,GAE/D5D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,EAAIqB,EAAMY,KAAKG,aAAapC,EAAE,KAC9DqB,EAAMY,KAAKG,aAAapC,EAAE,GAAK7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,GAE/D7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,EAAIqB,EAAMY,KAAKG,aAAapC,EAAE,KAC9DqB,EAAMY,KAAKG,aAAapC,EAAE,GAAK7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,GAGnEqB,EAAMY,KAAKE,OAAOuC,KAAK,CAAE3E,EAAG5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,EAAGC,EAAG7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,IAElGqB,EAAMY,KAAKC,MAAQ,CACfnC,EAAG,CAAC5D,EAAEyN,QAAUnE,EAAYnH,QAAQyB,GACpCC,EAAG,CAAC7D,EAAE0N,QAAUpE,EAAYnH,QAAQ0B,IAGxC,EAAE,SAASoK,gBAAgB,YAE3B/G,EAAW/E,OAAQ+C,EAAMY,KAAKE,QAAQ,EAAO,GAErD,CA+EqChF,CAAKhB,EAAE,IAE5CgO,EAAarM,GAAG,WAAY3B,IAAQmN,EAAMnN,EAAE,IAC5CgO,EAAarM,GAAG,WAAY3B,IAAQmN,EAAMnN,EAAE,GAAI,EAEpDkL,KAAM,KACF,IAA0B,GAAtBD,EAAKyB,aAAoB,OAAO,EAAE,SAASJ,aAAa,WAAY,IACxErB,EAAKyB,eACLxH,EAAMY,KAAKI,SACXhE,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC/DyC,EAAMY,KAAKK,QAAU,GACrBjB,EAAME,QAAQvD,SAAQ,CAACZ,EAAGwC,KAClBA,EAAIwH,EAAKyB,eACbxF,EAAWyF,MAAO1L,GAAG,GACrBiE,EAAMY,KAAKK,QAAQoC,KAAKtH,GAAE,KAEJ,GAAtBgK,EAAKyB,aACL,EAAE,SAASJ,aAAa,WAAY,IAEpC,EAAE,SAAS2B,gBAAgB,YAE/B,EAAE,SAASA,gBAAgB,WAAW,EAE1C9C,KAAM,KACF,GAAIF,EAAKyB,cAAgBxH,EAAME,QAAQ1B,OAAS,EAAG,OAAO,EAAE,SAAS4I,aAAa,WAAY,IAC9FrB,EAAKyB,eACLxH,EAAMY,KAAKI,SACXhE,EAAeyK,MAAOzH,EAAMC,WAAW3C,MAAO0C,EAAMC,WAAW1C,QAC/DyC,EAAMY,KAAKK,QAAU,GACrBjB,EAAME,QAAQvD,SAAQ,CAACZ,EAAGwC,KAClBA,EAAIwH,EAAKyB,eACbxF,EAAWyF,MAAO1L,GAAG,GACrBiE,EAAMY,KAAKK,QAAQoC,KAAKtH,GAAE,IAE9B,EAAE,SAASgN,gBAAgB,YACvBhD,EAAKyB,cAAgBxH,EAAME,QAAQ1B,OAAS,EAC5C,EAAE,SAAS4I,aAAa,WAAY,IAEpC,EAAE,SAAS2B,gBAAgB,WAC/B,GAIR,SAAS5C,EAAS6C,GACd,IAAIvB,EAAQ1B,EAAK0B,MAAMwB,UAAU,cAC7BC,EAAOlO,SAASmM,cAAc,KAClC+B,EAAK/C,SAAW6C,EAAOA,EAAO,OAAS,eACvCE,EAAKC,KAAO1B,EACZyB,EAAKE,OACT,CAEA,EAAE,aAAaxM,iBAAiB,SAAS,KAAQuJ,GAAU,IAI3DvK,OAAOyN,qBAAuB,WAC1B,IAAIC,GAAQ,EACZ,IAAW/H,EACX,OADWA,EAA29DgI,UAAUC,WAAaD,UAAUE,QAAU7N,OAAO8N,OAApgE,sVAAsVC,KAAKpI,IAAM,0kDAA0kDoI,KAAKpI,EAAEqI,OAAO,EAAG,OAAKN,GAAQ,GACt9DA,CACX,EAEA1N,OAAOiO,OAASjC,UARJ,IAACnJ,UAmBmB,IAAhBG,KAAKkL,SAnBO,IAAIC,SAAQtO,GAAKuO,WAAWvO,EAAGgD,MAqBvDsH,EAAK4B,OAEL,EAAE,SAASsC,QAAUlE,EAAKC,KAC1B,EAAE,SAASiE,QAAUlE,EAAKE,KAE1B+D,YAAW,IAAM,EAAE,aAAa,GAAMrN,SAAQ7B,IAC1CA,EAAEuL,UAAUC,OAAO,WAAW,KAC9B,IAAI,C","sources":["webpack:///./dragger.min.js","webpack:///./hdcanvas.js","webpack:///./RamerDouglasPeucker.js","webpack:///./draw.js","webpack:///./DouglasPeucker.js","webpack:///./VisvalingamWhyatt.js"],"sourcesContent":["/**\r\n * Code by Wetrain (c) 2023\r\n * All rights reserved.\r\n */\r\n\r\n\"use strict\";var $=(e,t)=>!0==t?document.querySelectorAll(e):document.querySelector(e),dragger=(e,t)=>{if(t=t||{},\"object\"!=typeof $(e)||null===$(e))return console.warn(\"The parameter target type must be a valid HTMLElement.\");if(t&&\"[object Object]\"!==Object.prototype.toString.call(t))return console.warn(\"The parameter config type must be Object.\");var r=$(e),n={blur:t.blur||window,end:t.end||window,move:t.move||window},o={dragstart:{target:r,event:[\"mousedown\",\"touchstart\"]},dragmove:{target:n.move,event:[\"mousemove\",\"touchmove\"]},dragend:{target:n.end,event:[\"mouseup\",\"touchend\"]},dragout:{target:n.blur,event:[\"blur\"]}};function a(e,t){!1!=o.hasOwnProperty(e)&&o[e].event.forEach(r=>{o[e].target.addEventListener(r,e=>t(e))})}function u(e){var t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+r}}function l(e){return{x:u(e).left,y:u(e).top}}var g={dragin:\"dragstart\",dragover:\"dragover\",dragout:\"dragleave\"};function d(e){dragging=e?!0==e:!0!=dragging}function c(e,t,r){!1!=g.hasOwnProperty(e)&&null!==t&&t.addEventListener(g[e],e=>r(e))}return{On:a,When:c,Toggle:d}};\r\n\r\nexport default dragger;","export default function createHDCanvas(canvas, w, h) {\r\n    const ratio = window.devicePixelRatio || 1;\r\n    canvas.width = w * ratio;\r\n    canvas.height = h * ratio;\r\n    canvas.style.width = `${w}px`;\r\n    canvas.style.height = `${h}px`;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.scale(ratio, ratio);\r\n    return canvas;\r\n}","function getDistance(pt, lineStart, lineEnd) {\r\n    var dx = lineEnd.x - lineStart.x;\r\n    var dy = lineEnd.y - lineStart.y;\r\n    var normalLength = Math.sqrt(dx * dx + dy * dy);\r\n    var distance = (dy * pt.x - dx * pt.y + lineEnd.x * lineStart.y - lineEnd.y * lineStart.x) / normalLength;\r\n    return Math.abs(distance);\r\n}\r\n\r\nfunction simplify(points, epsilon) {\r\n    var dmax = 0;\r\n    var index = 0;\r\n\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var d = getDistance(points[i], points[0], points[points.length - 1]);\r\n        if (d > dmax) {\r\n            dmax = d;\r\n            index = i;\r\n        }\r\n    }\r\n\r\n    if (dmax > epsilon) {\r\n        var left = points.slice(0, index + 1);\r\n        var right = points.slice(index);\r\n        var simplifiedLeft = simplify(left, epsilon);\r\n        var simplifiedRight = simplify(right, epsilon);\r\n\r\n        return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\r\n    }\r\n\r\n    return [points[0], points[points.length - 1]];\r\n}\r\n\r\nexport default function RamerDouglasPeucker(points, ctx) {\r\n    var simplifiedPoints = simplify(points, 5);\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}","\"use strict\";\r\n\r\nimport dragger from \"./dragger.min.js\";\r\nimport createHDCanvas from \"./hdcanvas.js\";\r\nimport DouglasPeucker from \"./DouglasPeucker.js\";\r\nimport RamerDouglasPeucker from \"./RamerDouglasPeucker.js\";\r\nimport VisvalingamWhyatt from \"./VisvalingamWhyatt.js\";\r\n// importScript(\"./lineWorker.js\");\r\n\r\nvar colors = ['rgb(0, 0, 0)', 'rgb(38, 38, 38)', 'rgb(89, 89, 89)', 'rgb(140, 140, 140)', 'rgb(191, 191, 191)', 'rgb(217, 217, 217)', 'rgb(233, 233, 233)', 'rgb(245, 245, 245)', 'rgb(250, 250, 250)', 'rgb(255, 255, 255)', 'rgb(225, 60, 57)', 'rgb(231, 95, 51)', 'rgb(235, 144, 58)', 'rgb(245, 219, 77)', 'rgb(114, 192, 64)', 'rgb(89, 191, 192)', 'rgb(66, 144, 247)', 'rgb(54, 88, 226)', 'rgb(106, 57, 201)', 'rgb(216, 68, 147)', 'rgb(251, 233, 230)', 'rgb(252, 237, 225)', 'rgb(252, 239, 212)', 'rgb(252, 251, 207)', 'rgb(231, 246, 213)', 'rgb(218, 244, 240)', 'rgb(217, 237, 250)', 'rgb(224, 232, 250)', 'rgb(237, 225, 248)', 'rgb(246, 226, 234)', 'rgb(255, 163, 158)', 'rgb(255, 187, 150)', 'rgb(255, 213, 145)', 'rgb(255, 251, 143)', 'rgb(183, 235, 143)', 'rgb(135, 232, 222)', 'rgb(145, 213, 255)', 'rgb(173, 198, 255)', 'rgb(211, 173, 247)', 'rgb(255, 173, 210)', 'rgb(255, 77, 79)', 'rgb(255, 122, 69)', 'rgb(255, 169, 64)', 'rgb(255, 236, 61)', 'rgb(115, 209, 61)', 'rgb(54, 207, 201)', 'rgb(64, 169, 255)', 'rgb(89, 126, 247)', 'rgb(146, 84, 222)', 'rgb(247, 89, 171)', 'rgb(207, 19, 34)', 'rgb(212, 56, 13)', 'rgb(212, 107, 8)', 'rgb(212, 177, 6)', 'rgb(56, 158, 13)', 'rgb(8, 151, 156)', 'rgb(9, 109, 217)', 'rgb(29, 57, 196)', 'rgb(83, 29, 171)', 'rgb(196, 29, 127)', 'rgb(130, 0, 20)', 'rgb(135, 20, 0)', 'rgb(135, 56, 0)', 'rgb(97, 71, 0)', 'rgb(19, 82, 0)', 'rgb(0, 71, 79)', 'rgb(0, 58, 140)', 'rgb(6, 17, 120)', 'rgb(34, 7, 94)', 'rgb(120, 6, 80)'];\r\n\r\nvar Datas = {\r\n    CanvasSize: {\r\n        width: 480,\r\n        height: 320\r\n    },\r\n    Objects: [],\r\n    Status: {\r\n        drawing: false,\r\n        mode: \"draw\",\r\n        selected: false,\r\n        dragging: false\r\n    },\r\n    Style: {\r\n        Stroke: {\r\n            Color: colors[36],\r\n            Size: 8\r\n        },\r\n        Fill: {\r\n            Color: \"#000\"\r\n        }\r\n    },\r\n    Temp: {\r\n        Mouse: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        Points: [],\r\n        Objects: [],\r\n        ExtremeValue: {\r\n            x: [0, 0],\r\n            y: [0, 0]\r\n        },\r\n        DIndex: 0,\r\n        History: []\r\n    },\r\n    Limit: {\r\n        max: 48,\r\n        min: 1\r\n    },\r\n    Algorithm: \"DouglasPeucker\"\r\n}\r\n\r\n/***********************************************************************\r\nObjects\r\n{\r\n    position: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    size: {\r\n        width: 0,\r\n        height: 0\r\n    },\r\n    style: {\r\n        strokeColor: \"#000\",\r\n        strokeWidth: \"#000\"\r\n    },\r\n    points: [],\r\n    image: \"image url\",\r\n    rotate: 0,\r\n    scale: 1\r\n}\r\n ***********************************************************************/\r\n\r\nvar $ = (s, a) => { return a == true ? document.querySelectorAll(s) : document.querySelector(s); };\r\n\r\nvar showActionPopup = false;\r\nvar focused_obj = null;\r\n\r\n$('[data-mode=\"select\"]').addEventListener(\"click\", () => {\r\n    Datas.Status.mode = \"select\";\r\n})\r\n\r\n$('[data-mode=\"draw\"]').addEventListener(\"click\", () => {\r\n    Datas.Status.mode = \"draw\";\r\n    focused_obj = null;\r\n    createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n})\r\n\r\ndocument.addEventListener(\"contextmenu\", (e) => {\r\n    e.preventDefault();\r\n})\r\n\r\nvar moving_selected_obj = false;\r\nvar selected_obj = null;\r\nvar selected_index = 0;\r\n\r\nwindow.addEventListener(\"keydown\", (e) => {\r\n    if (e.ctrlKey) {\r\n        e.preventDefault();\r\n        if (moving_selected_obj == true) {\r\n            return;\r\n        }\r\n        if (e.key == \"z\") {\r\n            return draw.undo();\r\n        } else if (e.key == \"y\") {\r\n            return draw.redo();\r\n        } else if (e.shiftKey && e.key == \"S\") {\r\n            return download();\r\n        }\r\n    }\r\n})\r\n\r\n$(\".action\", true).forEach(e => {\r\n    e.addEventListener(\"click\", () => {\r\n        showActionPopup = true;\r\n        $(\".action-popup.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n        $(`[action-popup=\"${e.getAttribute(\"data-action\")}\"]`).classList.add(\"active\");\r\n    });\r\n\r\n    e.addEventListener(\"mousemove\", () => {\r\n        if (showActionPopup == true) {\r\n            $(\".action-popup.active\", true).forEach(p => {\r\n                p.classList.remove(\"active\");\r\n            })\r\n            $(\".action.active\", true).forEach(p => {\r\n                p.classList.remove(\"active\");\r\n            })\r\n            e.classList.add(\"active\");\r\n            $(`[action-popup=\"${e.getAttribute(\"data-action\")}\"]`).classList.add(\"active\");\r\n        }\r\n    });\r\n});\r\n\r\ndocument.addEventListener(\"mousedown\", (e) => {\r\n    var t = false;\r\n    $(\".action\", true).forEach(a => {\r\n        if (a.contains(e.target)) {\r\n            t = true;\r\n        }\r\n    })\r\n    if (t == true) return;\r\n    var has = false;\r\n    $(\".action.popup\", true).forEach(p => {\r\n        if (p.contains(e.target)) {\r\n            has = true;\r\n        }\r\n    })\r\n    if (has == false && showActionPopup == true) {\r\n        showActionPopup = false;\r\n        $(\".action.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n        $(\".action-popup.active\", true).forEach(a => {\r\n            a.classList.remove(\"active\");\r\n        })\r\n    }\r\n})\r\n\r\n\r\n$(\".mode\", true).forEach(mode => {\r\n    mode.addEventListener(\"click\", () => {\r\n        $(\".mode.active\", true).forEach(active => {\r\n            active.classList.remove(\"active\");\r\n        })\r\n        $(\".mode-popup.active\", true).forEach(popup => {\r\n            popup.classList.remove(\"active\");\r\n        })\r\n        mode.classList.add(\"active\");\r\n        mode.querySelector(\".mode-popup\") ? mode.querySelector(\".mode-popup\").classList.add(\"active\") : null;\r\n    })\r\n\r\n    /*e.addEventListener(\"click\", (evt) => {\r\n        if (e.getAttribute(\"data-popup\")) {\r\n            if (!$(`[popup-name=\"${e.getAttribute(\"data-popup\")}\"]`).contains(evt.target)) {\r\n                $(`[popup-name=\"${e.getAttribute(\"data-popup\")}\"]`).classList.toggle(\"active\");\r\n            }\r\n        }\r\n    });*/\r\n});\r\n\r\ndocument.addEventListener(\"mousedown\", (e) => {\r\n    var popup = false;\r\n    var trigger = false;\r\n    $(\"[popup-name]\", true).forEach(p => {\r\n        if (p.contains(e.target)) {\r\n            popup = true;\r\n        }\r\n    })\r\n    $(\".mode\", true).forEach(m => {\r\n        if (m.contains(e.target)) {\r\n            trigger = true;\r\n        }\r\n    })\r\n    if (popup == false) {\r\n        if (trigger == true) return;\r\n        $(\".mode-popup.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n    }\r\n});\r\n\r\n$(\"#size\").value = Datas.Style.Stroke.Size;\r\n\r\n$(\"#size\").addEventListener(\"change\", () => {\r\n    if ($(\"#size\").value < Datas.Limit.min) {\r\n        $(\"#size\").value = Datas.Limit.min;\r\n    }\r\n    if ($(\"#size\").value > Datas.Limit.max) {\r\n        $(\"#size\").value = Datas.Limit.max;\r\n    }\r\n    Datas.Style.Stroke.Size = $(\"#size\").value;\r\n});\r\n\r\n$(\"#preview-color\").style.background = Datas.Style.Stroke.Color;\r\n\r\n$(\"[data-select-group-parent]\", true).forEach(g => {\r\n    $(`[data-select-group=\"${g.getAttribute(\"data-select-group-parent\")}\"]`, true).forEach(s => {\r\n        s.addEventListener(\"click\", () => {\r\n            $(`[data-select-group=\"${s.getAttribute(\"data-select-group\")}\"].selected`, true).forEach(sed => {\r\n                sed.classList.remove(\"selected\");\r\n            })\r\n            s.classList.add(\"selected\");\r\n            Datas.Algorithm = s.getAttribute(\"data-select-value\");\r\n        })\r\n    })\r\n})\r\n\r\ncolors.forEach((c, i) => {\r\n    var li = document.createElement(\"li\");\r\n    li.setAttribute(\"data-value\", c);\r\n    li.className = \"color-block\";\r\n    li.innerHTML = `<div class=\"color-block-inner\" style=\"background-color: ${c}\"></div>`;\r\n    li.addEventListener(\"click\", () => {\r\n        $(\"#preview-color\").style.background = c;\r\n        Datas.Style.Stroke.Color = c;\r\n    })\r\n    $(\"#colors\").appendChild(li);\r\n})\r\n\r\nfunction drawPoints(el, value, reserve, useCurrent) {\r\n    var canvas = el;\r\n    var data = value;\r\n    if (reserve != true) {\r\n        createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    }\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (useCurrent == 1) {\r\n        ctx.lineWidth = Datas.Style.Stroke.Size;\r\n        ctx.strokeStyle = Datas.Style.Stroke.Color;\r\n        ctx.fillStyle = Datas.Style.Stroke.Color;\r\n        var temp = data;\r\n        data = {};\r\n        data.points = temp;\r\n        data.algorithm = Datas.Algorithm;\r\n    } else {\r\n        ctx.lineWidth = data.style.strokeWidth;\r\n        ctx.strokeStyle = data.style.strokeColor;\r\n        ctx.fillStyle = Datas.Style.Stroke.Color;\r\n    }\r\n    ctx.imageSmoothingEnabled = true;\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineCap = \"round\";\r\n    if (data.points.length == 0) return;\r\n    if (data.points.length == 1) {\r\n        ctx.beginPath();\r\n        ctx.arc(data.points[0].x, data.points[0].y, Datas.Style.Stroke.Size / 2, 0, 2 * Math.PI, true);\r\n        ctx.fill();\r\n        return;\r\n    }\r\n    if (data.points.length == 2) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(data.points[0].x, data.points[0].y);\r\n        ctx.lineTo(data.points[1].x, data.points[1].y);\r\n        ctx.stroke();\r\n        return;\r\n    } \r\n    if (reserve == true) {\r\n        if (data.algorithm == \"RamerDouglasPeucker\") {\r\n            return RamerDouglasPeucker(data.points, ctx);\r\n        } else if (data.algorithm == \"DouglasPeucker\") {\r\n            return DouglasPeucker(data.points, ctx)\r\n        } else if (data.algorithm == \"VisvalingamWhyatt\") {\r\n            return VisvalingamWhyatt(data.points, ctx)\r\n        } \r\n    }\r\n    try {\r\n        for (let i = 0; i < data.points.length - 1; i++) {\r\n            ctx.beginPath();\r\n            if (i == 0) {\r\n                ctx.moveTo(data.points[i].x, data.points[i].y)\r\n                ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i + 1].x + (data.points[i + 2].x - data.points[i + 1].x) / 2, data.points[i + 1].y + (data.points[i + 2].y - data.points[i + 1].y) / 2);\r\n            } else if (i == data.points.length - 2) {\r\n                ctx.moveTo(data.points[i].x + (data.points[i + 1].x - data.points[i].x) / 2, data.points[i].y + (data.points[i + 1].y - data.points[i].y) / 2)\r\n                ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i].x + (data.points[i + 1].x - data.points[i].x) * 0.75, data.points[i].y + (data.points[i + 1].y - data.points[i].y) * 0.75);\r\n            } else {\r\n                ctx.moveTo(data.points[i].x + (data.points[i + 1].x - data.points[i].x) / 2, data.points[i].y + (data.points[i + 1].y - data.points[i].y) / 2)\r\n                ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i + 1].x + (data.points[i + 2].x - data.points[i + 1].x) / 2, data.points[i + 1].y + (data.points[i + 2].y - data.points[i + 1].y) / 2);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    } catch (e) {\r\n        console.log(\"Error :\", e)\r\n    }\r\n}\r\n\r\nfunction getPosition(element) {\r\n    function offset(el) {\r\n        var rect = el.getBoundingClientRect(),\r\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\r\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n        return { top: rect.top + scrollTop, left: rect.left + scrollLeft }\r\n    }\r\n    return { x: offset(element).left, y: offset(element).top };\r\n}\r\n\r\nfunction findMaxArea() {\r\n    var points = Datas.Objects;\r\n    if (points.length < 1) return {\r\n        sx: 0,\r\n        sy: 0,\r\n        ex: 0,\r\n        ey: 0\r\n    };\r\n    var values = {\r\n        minX: points[0][\"ExtremeValue\"].x[0],\r\n        minY: points[0][\"ExtremeValue\"].y[0],\r\n        maxX: points[0][\"ExtremeValue\"].x[1],\r\n        maxY: points[0][\"ExtremeValue\"].y[1]\r\n    }\r\n    points.forEach(point => {\r\n        if (point[\"ExtremeValue\"].x[0] <= values.minX) {\r\n            values.minX = point[\"ExtremeValue\"].x[0]\r\n        }\r\n        if (point[\"ExtremeValue\"].x[1] >= values.maxX) {\r\n            values.maxX = point[\"ExtremeValue\"].x[1]\r\n        }\r\n        if (point[\"ExtremeValue\"].y[0] <= values.minY) {\r\n            values.minY = point[\"ExtremeValue\"].y[0]\r\n        }\r\n        if (point[\"ExtremeValue\"].y[1] >= values.maxY) {\r\n            values.maxY = point[\"ExtremeValue\"].y[1]\r\n        }\r\n    })\r\n    return {\r\n        sx: values.minX,\r\n        ex: values.maxX,\r\n        sy: values.minY,\r\n        ey: values.maxY\r\n    };\r\n}\r\n\r\nfunction drawObjectBorder(element, ExtremeValue, focused = false, clear = true) {\r\n    if (clear == true) {\r\n        createHDCanvas(element, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    }\r\n    var ctx = element.getContext(\"2d\");\r\n    ctx.beginPath();\r\n\r\n    /*\r\n    if (focused == true) {\r\n        ctx.shadowColor = \"rgb(67 149 239)\";\r\n        ctx.shadowBlur = 2;\r\n    } else {\r\n        ctx.shadowColor = \"\";\r\n        ctx.shadowBlur = 0;\r\n    }\r\n    */\r\n\r\n    ctx.fillStyle = \"rgb(178,204,255)\";        // rgb(178,204,255)\r\n    ctx.lineWidth = focused == true ? 1 : 1.5;\r\n    ctx.strokeStyle = \"rgb(178,204,255)\";      // rgb(178,204,255)\r\n    ctx.moveTo(ExtremeValue.x[0], ExtremeValue.y[0]);\r\n    ctx.lineTo(ExtremeValue.x[1], ExtremeValue.y[0]);\r\n    ctx.lineTo(ExtremeValue.x[1], ExtremeValue.y[1]);\r\n    ctx.lineTo(ExtremeValue.x[0], ExtremeValue.y[1]);\r\n    ctx.lineTo(ExtremeValue.x[0], ExtremeValue.y[0]);\r\n    ctx.stroke();\r\n\r\n    var completed = false;\r\n\r\n    if (focused == true && completed == true) {\r\n        // Resize blocks\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] + (ExtremeValue.x[1] - ExtremeValue.x[0]) / 2 - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] + (ExtremeValue.x[1] - ExtremeValue.x[0]) / 2 - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[0] + (ExtremeValue.y[1] - ExtremeValue.y[0]) / 2 - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[0] + (ExtremeValue.y[1] - ExtremeValue.y[0]) / 2 - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n    }\r\n\r\n    ctx.closePath();\r\n}\r\n\r\nvar draw = {\r\n    currentIndex: -1,\r\n    canvas: $(\"#canvas\"),\r\n    image: $(\"#image\"),\r\n    select: $(\"#select\"),\r\n    mp: $(\"#mp\"),\r\n    mask: $(\"#mask\"),\r\n    init: async () => {\r\n        $(\"#painter\").classList.remove(\"unloaded\");\r\n        mask.style = `width: ${Datas.CanvasSize.width}px; min-width: calc(4rem + ${Datas.CanvasSize.width}px); min-height: calc(4rem + ${Datas.CanvasSize.height}px)`;\r\n        canvas.hidden = false;\r\n        image.hidden = false;\r\n        mp.hidden = false;\r\n        select.hidden = false;\r\n        createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n        var selectEvent = dragger(\"#canvas\");\r\n\r\n        var select_mouse = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        selectEvent.On(\"dragstart\", (e) => {\r\n            if (Datas.Status.mode == \"select\") {\r\n                var points = Datas.Objects;\r\n                if (points.length < 1) return;\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                var mouse = { x: e.clientX - getPosition(select).x, y: e.clientY - getPosition(select).y };\r\n                select_mouse = {\r\n                    x: e.clientX,\r\n                    y: e.clientY\r\n                }\r\n                var v = false;\r\n                var sp = findMaxArea();\r\n                selected_obj = points[0];\r\n                selected_index = 0;\r\n                points.forEach((p, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    if (p[\"ExtremeValue\"].x[0] < mouse.x && mouse.x < p[\"ExtremeValue\"].x[1] && p[\"ExtremeValue\"].y[0] < mouse.y && mouse.y < p[\"ExtremeValue\"].y[1]) {\r\n                        v = true;\r\n                        if ((sp.ex - sp.sx) * (sp.ey - sp.sy) >= (p[\"ExtremeValue\"].x[1] - p[\"ExtremeValue\"].x[0]) * (p[\"ExtremeValue\"].y[1] - p[\"ExtremeValue\"].y[0])) {\r\n                            selected_obj = p;\r\n                            selected_index = i;\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            /*\r\n                            if (p[\"ExtremeValue\"].x[0] < sp.sx) {\r\n                                sp.sx = p[\"ExtremeValue\"].x[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].x[1] > sp.ex) {\r\n                                sp.ex = p[\"ExtremeValue\"].x[1];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[0] < sp.sy) {\r\n                                sp.sy = p[\"ExtremeValue\"].y[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[1] > sp.ey) {\r\n                                sp.ey = p[\"ExtremeValue\"].y[1];\r\n                            }\r\n                            */\r\n                        } else {\r\n                            /*\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            */\r\n                        }\r\n                    }\r\n\r\n                })\r\n                if (v == false) {\r\n                    focused_obj = null;\r\n                    createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                    return\r\n                };\r\n                focused_obj = selected_obj;\r\n                moving_selected_obj = true;\r\n                var temp_objs = [...Datas.Objects];\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                temp_objs.splice(selected_index, 1);\r\n                temp_objs.forEach((points, i) => {\r\n                    if (i > draw.currentIndex - 1) return;\r\n                    drawPoints(image, points, true);\r\n                });\r\n                drawPoints(mp, Datas.Objects[selected_index], true);\r\n                drawObjectBorder(select, Datas.Objects[selected_index].ExtremeValue, true);\r\n            }\r\n        })\r\n\r\n        selectEvent.On(\"dragmove\", (e) => { selectMove(e); });\r\n\r\n        selectEvent.On(\"dragend\", (e) => { selectEnd(e); });\r\n        selectEvent.On(\"dragout\", (e) => { selectEnd(e); });\r\n\r\n        function selectEnd(e) {\r\n            if (moving_selected_obj == true) {\r\n                Datas.Objects[selected_index] = selected_obj;\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                Datas.Objects.forEach((points, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    drawPoints(image, points, true);\r\n                });\r\n                Datas.Status.drawing = false;\r\n            }\r\n            selected_obj = null;\r\n            moving_selected_obj = false;\r\n        }\r\n\r\n        function selectMove(e) {\r\n            if (moving_selected_obj == true) {\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                selected_obj.points.forEach((point, i) => {\r\n                    selected_obj.points[i] = {\r\n                        x: point.x + e.clientX - select_mouse.x,\r\n                        y: point.y + e.clientY - select_mouse.y\r\n                    }\r\n                })\r\n                selected_obj.ExtremeValue.x[0] += e.clientX - select_mouse.x;\r\n                selected_obj.ExtremeValue.x[1] += e.clientX - select_mouse.x;\r\n                selected_obj.ExtremeValue.y[0] += e.clientY - select_mouse.y;\r\n                selected_obj.ExtremeValue.y[1] += e.clientY - select_mouse.y;\r\n\r\n                drawPoints(mp, selected_obj, true);\r\n                drawObjectBorder(select, selected_obj.ExtremeValue, true);\r\n\r\n                // console.log(selected_obj.algorithm)\r\n\r\n                select_mouse = {\r\n                    x: e.clientX,\r\n                    y: e.clientY\r\n                }\r\n            }\r\n        }\r\n\r\n        canvas.addEventListener(\"mousemove\", (e) => {\r\n            if (Datas.Status.mode == \"select\" && moving_selected_obj == false) {\r\n                var points = [...Datas.Objects];\r\n                if (points.length < 1) return;\r\n                createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                var mouse = { x: e.clientX - getPosition(select).x, y: e.clientY - getPosition(select).y };\r\n                var v = false;\r\n                var sp = findMaxArea();\r\n                var overed = points[0];\r\n                points.forEach((p, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    if (p[\"ExtremeValue\"].x[0] < mouse.x && mouse.x < p[\"ExtremeValue\"].x[1] && p[\"ExtremeValue\"].y[0] < mouse.y && mouse.y < p[\"ExtremeValue\"].y[1]) {\r\n                        v = true;\r\n                        if ((sp.ex - sp.sx) * (sp.ey - sp.sy) > (p[\"ExtremeValue\"].x[1] - p[\"ExtremeValue\"].x[0]) * (p[\"ExtremeValue\"].y[1] - p[\"ExtremeValue\"].y[0])) {\r\n                            overed = p;\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            /*\r\n                            if (p[\"ExtremeValue\"].x[0] < sp.sx) {\r\n                                sp.sx = p[\"ExtremeValue\"].x[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].x[1] > sp.ex) {\r\n                                sp.ex = p[\"ExtremeValue\"].x[1];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[0] < sp.sy) {\r\n                                sp.sy = p[\"ExtremeValue\"].y[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[1] > sp.ey) {\r\n                                sp.ey = p[\"ExtremeValue\"].y[1];\r\n                            }\r\n                            */\r\n                        } else {\r\n                            /*\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            */\r\n                        }\r\n                    }\r\n\r\n                })\r\n                if (focused_obj != null) {\r\n                    drawObjectBorder(select, focused_obj.ExtremeValue, true);\r\n                }\r\n                if (v == false) return;\r\n                var ExtremeValue = {\r\n                    x: [sp.sx, sp.ex],\r\n                    y: [sp.sy, sp.ey]\r\n                }\r\n                if (focused_obj != overed) {\r\n                    drawObjectBorder(select, ExtremeValue, false, false);\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        })\r\n\r\n        function move(e) {\r\n            if (e.type == \"touchmove\") {\r\n                e.preventDefault();\r\n            }\r\n            if (Datas.Status.drawing == true && Datas.Status.mode == \"draw\") {\r\n                if (e.clientX - getPosition(canvas).x < Datas.Temp.ExtremeValue.x[0]) {\r\n                    Datas.Temp.ExtremeValue.x[0] = e.clientX - getPosition(canvas).x;\r\n                }\r\n                if (e.clientX - getPosition(canvas).x > Datas.Temp.ExtremeValue.x[1]) {\r\n                    Datas.Temp.ExtremeValue.x[1] = e.clientX - getPosition(canvas).x;\r\n                }\r\n                if (e.clientY - getPosition(canvas).y < Datas.Temp.ExtremeValue.y[0]) {\r\n                    Datas.Temp.ExtremeValue.y[0] = e.clientY - getPosition(canvas).y;\r\n                }\r\n                if (e.clientY - getPosition(canvas).y > Datas.Temp.ExtremeValue.y[1]) {\r\n                    Datas.Temp.ExtremeValue.y[1] = e.clientY - getPosition(canvas).y;\r\n                };\r\n\r\n                Datas.Temp.Points.push({ x: e.clientX - getPosition(canvas).x, y: e.clientY - getPosition(canvas).y });\r\n\r\n                Datas.Temp.Mouse = {\r\n                    x: [e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y]\r\n                };\r\n\r\n                $(\"#undo\").removeAttribute(\"disabled\");\r\n\r\n                drawPoints(canvas, Datas.Temp.Points, false, 1);\r\n            }\r\n        }\r\n\r\n        function leave(e) {\r\n            if (e.type == \"touchend\") {\r\n                // e.preventDefault();\r\n            }\r\n            if (Datas.Status.drawing == true && Datas.Status.mode == \"draw\") {\r\n                createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n                if (Datas.Temp.DIndex != 0) {\r\n                    Datas.Objects = Datas.Temp.History;\r\n\r\n                    createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n                    Datas.Objects.forEach(o => {\r\n                        drawPoints(image, o, true);\r\n                    });\r\n\r\n                    Datas.Temp.DIndex = 0;\r\n\r\n                    Datas.Temp.History = [];\r\n                }\r\n\r\n                draw.currentIndex++;\r\n\r\n                var padding = 4;\r\n\r\n                Datas.Temp.ExtremeValue.x[0] -= Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.x[1] += Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.y[0] -= Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.y[1] += Datas.Style.Stroke.Size / 2 + padding;\r\n\r\n                Datas.Status.drawing = false;\r\n                Datas.Objects.push({\r\n                    position: {\r\n                        x: Datas.Temp.ExtremeValue.x[0],\r\n                        y: Datas.Temp.ExtremeValue.y[0]\r\n                    },\r\n                    size: {\r\n                        width: Datas.Temp.ExtremeValue.x[1] - Datas.Temp.ExtremeValue.x[0],\r\n                        height: Datas.Temp.ExtremeValue.y[1] - Datas.Temp.ExtremeValue.y[0]\r\n                    },\r\n                    style: {\r\n                        strokeColor: Datas.Style.Stroke.Color,\r\n                        strokeWidth: Datas.Style.Stroke.Size\r\n                    },\r\n                    algorithm: Datas.Algorithm,\r\n                    points: Datas.Temp.Points,\r\n                    image: \"image url\",\r\n                    rotate: 0,\r\n                    scale: 1,\r\n                    ExtremeValue: Datas.Temp.ExtremeValue\r\n                });\r\n                drawPoints(image, Datas.Temp.Points, true, 1);\r\n                $(\"#redo\").setAttribute(\"disabled\", \"\");\r\n            }\r\n        }\r\n\r\n        var drawingEvent = dragger(\"#canvas\");\r\n\r\n        drawingEvent.On(\"dragstart\", (e) => {\r\n            if (e.type == \"touchstart\") {\r\n                e.preventDefault();\r\n            }\r\n            if (Datas.Status.mode == \"draw\") {\r\n                Datas.Status.drawing = true;\r\n                Datas.Temp.Points = [{ x: e.clientX - getPosition(canvas).x, y: e.clientY - getPosition(canvas).y }];\r\n                Datas.Temp.Mouse = {\r\n                    x: [e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y]\r\n                };\r\n                Datas.Temp.ExtremeValue = {\r\n                    x: [e.clientX - getPosition(canvas).x, e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y, e.clientY - getPosition(canvas).y]\r\n                };\r\n                drawPoints(canvas, Datas.Temp.Points, false, 1);\r\n            }\r\n        });\r\n\r\n        drawingEvent.On(\"dragmove\", (e) => { move(e); });\r\n\r\n        drawingEvent.On(\"dragend\", (e) => { leave(e); });\r\n        drawingEvent.On(\"dragout\", (e) => { leave(e); });\r\n    },\r\n    undo: () => {\r\n        if (draw.currentIndex == -1) return $(\"#undo\").setAttribute(\"disabled\", \"\");\r\n        draw.currentIndex--;\r\n        Datas.Temp.DIndex--;\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        Datas.Temp.History = [];\r\n        Datas.Objects.forEach((o, i) => {\r\n            if (i > draw.currentIndex) return;\r\n            drawPoints(image, o, true);\r\n            Datas.Temp.History.push(o);\r\n        });\r\n        if (draw.currentIndex == -1) {\r\n            $(\"#undo\").setAttribute(\"disabled\", \"\")\r\n        } else {\r\n            $(\"#undo\").removeAttribute(\"disabled\");\r\n        }\r\n        $(\"#redo\").removeAttribute(\"disabled\");\r\n    },\r\n    redo: () => {\r\n        if (draw.currentIndex == Datas.Objects.length - 1) return $(\"#redo\").setAttribute(\"disabled\", \"\");\r\n        draw.currentIndex++;\r\n        Datas.Temp.DIndex++;\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        Datas.Temp.History = [];\r\n        Datas.Objects.forEach((o, i) => {\r\n            if (i > draw.currentIndex) return;\r\n            drawPoints(image, o, true);\r\n            Datas.Temp.History.push(o);\r\n        });\r\n        $(\"#undo\").removeAttribute(\"disabled\");\r\n        if (draw.currentIndex == Datas.Objects.length - 1) {\r\n            $(\"#redo\").setAttribute(\"disabled\", \"\")\r\n        } else {\r\n            $(\"#redo\").removeAttribute(\"disabled\");\r\n        }\r\n    }\r\n}\r\n\r\nfunction download(name) {\r\n    var image = draw.image.toDataURL('image/jpeg');\r\n    var link = document.createElement('a');\r\n    link.download = name ? name + \".jpg\" : 'Untitled.jpg';\r\n    link.href = image;\r\n    link.click();\r\n}\r\n\r\n$(\"#download\").addEventListener(\"click\", () => { download(); });\r\n\r\nvar delay = (d) => { return new Promise(r => setTimeout(r, d)); };\r\n\r\nwindow.mobileAndTabletCheck = function () {\r\n    let check = false;\r\n    (function (a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n    return check;\r\n};\r\n\r\nwindow.onload = async () => {\r\n    /*\r\n    if (mobileAndTabletCheck() == true) {\r\n        var info = document.createElement(\"div\");\r\n        info.className = \"--info\";\r\n        info.innerHTML = \"<div>請使用電腦瀏覽此頁面</div>\";\r\n        document.body.appendChild(info);\r\n        return;\r\n    }\r\n    */\r\n\r\n    await delay(Math.random() * 500);\r\n\r\n    draw.init();\r\n\r\n    $(\"#undo\").onclick = draw.undo;\r\n    $(\"#redo\").onclick = draw.redo;\r\n\r\n    setTimeout(() => $(\".unloaded\", true).forEach(e => {\r\n        e.classList.remove(\"unloaded\");\r\n    }), 300);\r\n}","function getDistance(pt, lineStart, lineEnd) {\r\n    var dx = lineEnd.x - lineStart.x;\r\n    var dy = lineEnd.y - lineStart.y;\r\n    var normalLength = Math.sqrt(dx * dx + dy * dy);\r\n    var distance = (dy * pt.x - dx * pt.y + lineEnd.x * lineStart.y - lineEnd.y * lineStart.x) / normalLength;\r\n    return Math.abs(distance);\r\n}\r\n\r\n/* Original function\r\nfunction simplifyDP(points, epsilon) {\r\n    var dmax = 0;\r\n    var index = 0;\r\n\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var d = getDistance(points[i], points[0], points[points.length - 1]);\r\n        if (d > dmax) {\r\n            dmax = d;\r\n            index = i;\r\n        }\r\n    }\r\n\r\n    if (dmax > epsilon) {\r\n        var left = points.slice(0, index + 1);\r\n        var right = points.slice(index);\r\n        var simplifiedLeft = simplifyDP(left, epsilon);\r\n        var simplifiedRight = simplifyDP(right, epsilon);\r\n\r\n        return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\r\n    }\r\n\r\n    return [points[0], points[points.length - 1]];\r\n}\r\n*/\r\n\r\nfunction simplifyDP(points, epsilon) {\r\n    const start = points[0];\r\n    const end = points[points.length - 1];\r\n\r\n    /*\r\n    const minX = Math.min(...points.map(p => p.x));\r\n    const minY = Math.min(...points.map(p => p.y));\r\n    const maxX = Math.max(...points.map(p => p.x));\r\n    const maxY = Math.max(...points.map(p => p.y));\r\n    */\r\n\r\n    const simplifiedPoints = [start];\r\n\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n        const point = points[i];\r\n\r\n        const distance = getDistance(point, start, end);\r\n\r\n        if (distance > epsilon) {\r\n            simplifiedPoints.push(point);\r\n        }\r\n    }\r\n\r\n    simplifiedPoints.push(end);\r\n\r\n    return simplifiedPoints;\r\n}\r\n\r\nexport default function DouglasPeucker(points, ctx) {\r\n    var simplifiedPoints = simplifyDP(points, 5); // 调整 epsilon 的值以控制简化程度\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}","function getTriangleArea(p1, p2, p3) {\r\n    return Math.abs((p1.x * (p2.y - p3.y) + p2.x * (p3.y - p1.y) + p3.x * (p1.y - p2.y)) / 2);\r\n}\r\n\r\nfunction simplifyVW(points, threshold) {\r\n    var areas = [];\r\n\r\n    // 计算每个点的三角形面积\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var area = getTriangleArea(points[i - 1], points[i], points[i + 1]);\r\n        areas.push(area);\r\n    }\r\n\r\n    // 根据面积排序，并删除面积最小的点\r\n    while (areas.length > 0 && Math.min(...areas) < threshold) {\r\n        var minIndex = areas.indexOf(Math.min(...areas));\r\n        points.splice(minIndex + 1, 1);\r\n        areas.splice(minIndex, 1);\r\n    }\r\n\r\n    return points;\r\n}\r\n\r\nexport default function VisvalingamWhyatt(points, ctx) {\r\n    var simplifiedPoints = simplifyVW(points, 1); // 调整阈值的值以控制简化程度\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}"],"names":["$","e","t","document","querySelectorAll","querySelector","console","warn","Object","prototype","toString","call","r","n","blur","window","end","move","o","dragstart","target","event","dragmove","dragend","dragout","g","dragin","dragover","On","hasOwnProperty","forEach","addEventListener","When","Toggle","dragging","createHDCanvas","canvas","w","h","ratio","devicePixelRatio","width","height","style","getContext","scale","simplify","points","epsilon","pt","lineStart","lineEnd","dx","dy","normalLength","distance","dmax","index","i","length","d","x","y","Math","sqrt","abs","left","slice","right","simplifiedLeft","simplifiedRight","concat","RamerDouglasPeucker","ctx","simplifiedPoints","beginPath","moveTo","xc","yc","quadraticCurveTo","lineTo","stroke","colors","Datas","CanvasSize","Objects","Status","drawing","mode","selected","Style","Stroke","Color","Size","Fill","Temp","Mouse","Points","ExtremeValue","DIndex","History","Limit","max","min","Algorithm","s","a","showActionPopup","focused_obj","mp","select","preventDefault","moving_selected_obj","selected_obj","selected_index","drawPoints","el","value","reserve","useCurrent","data","lineWidth","strokeStyle","fillStyle","temp","algorithm","strokeWidth","strokeColor","imageSmoothingEnabled","lineJoin","lineCap","arc","PI","fill","start","point","push","simplifyDP","DouglasPeucker","threshold","p1","p2","p3","areas","area","minIndex","indexOf","splice","simplifyVW","VisvalingamWhyatt","log","getPosition","element","offset","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","scrollTop","pageYOffset","top","findMaxArea","sx","sy","ex","ey","values","minX","minY","maxX","maxY","drawObjectBorder","focused","clear","closePath","ctrlKey","key","draw","undo","redo","shiftKey","download","p","classList","remove","getAttribute","add","contains","has","active","popup","trigger","m","background","sed","c","li","createElement","setAttribute","className","innerHTML","appendChild","currentIndex","image","mask","init","async","hidden","selectEvent","select_mouse","selectEnd","leave","type","position","size","rotate","mouse","clientX","clientY","v","sp","temp_objs","selectMove","overed","drawingEvent","removeAttribute","name","toDataURL","link","href","click","mobileAndTabletCheck","check","navigator","userAgent","vendor","opera","test","substr","onload","random","Promise","setTimeout","onclick"],"sourceRoot":""}