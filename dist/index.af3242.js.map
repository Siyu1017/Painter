{"version":3,"file":"index.af3242.js","mappings":"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","sources":["webpack:///./dragger.min.js","webpack:///./hdcanvas.js","webpack:///./DouglasPeucker.js","webpack:///./RamerDouglasPeucker.js","webpack:///./VisvalingamWhyatt.js","webpack:///./draw.js"],"sourcesContent":["/**\r\n * Code by Wetrain (c) 2023\r\n * All rights reserved.\r\n */\r\n\r\n\"use strict\";var $=(e,t)=>!0==t?document.querySelectorAll(e):document.querySelector(e),dragger=(e,t)=>{if(t=t||{},\"object\"!=typeof $(e)||null===$(e))return console.warn(\"The parameter target type must be a valid HTMLElement.\");if(t&&\"[object Object]\"!==Object.prototype.toString.call(t))return console.warn(\"The parameter config type must be Object.\");var r=$(e),n={blur:t.blur||window,end:t.end||window,move:t.move||window},o={dragstart:{target:r,event:[\"mousedown\",\"touchstart\"]},dragmove:{target:n.move,event:[\"mousemove\",\"touchmove\"]},dragend:{target:n.end,event:[\"mouseup\",\"touchend\"]},dragout:{target:n.blur,event:[\"blur\"]}};function a(e,t){!1!=o.hasOwnProperty(e)&&o[e].event.forEach(r=>{o[e].target.addEventListener(r,e=>t(e))})}function u(e){var t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+r}}function l(e){return{x:u(e).left,y:u(e).top}}var g={dragin:\"dragstart\",dragover:\"dragover\",dragout:\"dragleave\"};function d(e){dragging=e?!0==e:!0!=dragging}function c(e,t,r){!1!=g.hasOwnProperty(e)&&null!==t&&t.addEventListener(g[e],e=>r(e))}return{On:a,When:c,Toggle:d}};\r\n\r\nexport default dragger;","export default function createHDCanvas(canvas, w, h) {\r\n    const ratio = window.devicePixelRatio || 1;\r\n    canvas.width = w * ratio;\r\n    canvas.height = h * ratio;\r\n    canvas.style.width = `${w}px`;\r\n    canvas.style.height = `${h}px`;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.scale(ratio, ratio);\r\n    return canvas;\r\n}","function getDistance(pt, lineStart, lineEnd) {\r\n    var dx = lineEnd.x - lineStart.x;\r\n    var dy = lineEnd.y - lineStart.y;\r\n    var normalLength = Math.sqrt(dx * dx + dy * dy);\r\n    var distance = (dy * pt.x - dx * pt.y + lineEnd.x * lineStart.y - lineEnd.y * lineStart.x) / normalLength;\r\n    return Math.abs(distance);\r\n}\r\n\r\n/* Original function\r\nfunction simplifyDP(points, epsilon) {\r\n    var dmax = 0;\r\n    var index = 0;\r\n\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var d = getDistance(points[i], points[0], points[points.length - 1]);\r\n        if (d > dmax) {\r\n            dmax = d;\r\n            index = i;\r\n        }\r\n    }\r\n\r\n    if (dmax > epsilon) {\r\n        var left = points.slice(0, index + 1);\r\n        var right = points.slice(index);\r\n        var simplifiedLeft = simplifyDP(left, epsilon);\r\n        var simplifiedRight = simplifyDP(right, epsilon);\r\n\r\n        return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\r\n    }\r\n\r\n    return [points[0], points[points.length - 1]];\r\n}\r\n*/\r\n\r\nfunction simplifyDP(points, epsilon) {\r\n    const start = points[0];\r\n    const end = points[points.length - 1];\r\n\r\n    /*\r\n    const minX = Math.min(...points.map(p => p.x));\r\n    const minY = Math.min(...points.map(p => p.y));\r\n    const maxX = Math.max(...points.map(p => p.x));\r\n    const maxY = Math.max(...points.map(p => p.y));\r\n    */\r\n\r\n    const simplifiedPoints = [start];\r\n\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n        const point = points[i];\r\n\r\n        const distance = getDistance(point, start, end);\r\n\r\n        if (distance > epsilon) {\r\n            simplifiedPoints.push(point);\r\n        }\r\n    }\r\n\r\n    simplifiedPoints.push(end);\r\n\r\n    return simplifiedPoints;\r\n}\r\n\r\nexport default function DouglasPeucker(points, ctx) {\r\n    if (points.length == 1) {\r\n        ctx.beginPath();\r\n        ctx.arc(points[0].x, points[0].y, Datas.Style.Stroke.Size / 2, 0, 2 * Math.PI, true);\r\n        ctx.fill();\r\n        return;\r\n    } else if (points.length == 2) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(points[0].x, points[0].y);\r\n        ctx.lineTo(points[1].x, points[1].y);\r\n        ctx.stroke();\r\n        return;\r\n    } else if (points.length == 0) return;\r\n\r\n    var simplifiedPoints = simplifyDP(points, 5); // 调整 epsilon 的值以控制简化程度\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}","function getDistance(pt, lineStart, lineEnd) {\r\n    var dx = lineEnd.x - lineStart.x;\r\n    var dy = lineEnd.y - lineStart.y;\r\n    var normalLength = Math.sqrt(dx * dx + dy * dy);\r\n    var distance = (dy * pt.x - dx * pt.y + lineEnd.x * lineStart.y - lineEnd.y * lineStart.x) / normalLength;\r\n    return Math.abs(distance);\r\n}\r\n\r\nfunction simplify(points, epsilon) {\r\n    var dmax = 0;\r\n    var index = 0;\r\n\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var d = getDistance(points[i], points[0], points[points.length - 1]);\r\n        if (d > dmax) {\r\n            dmax = d;\r\n            index = i;\r\n        }\r\n    }\r\n\r\n    if (dmax > epsilon) {\r\n        var left = points.slice(0, index + 1);\r\n        var right = points.slice(index);\r\n        var simplifiedLeft = simplify(left, epsilon);\r\n        var simplifiedRight = simplify(right, epsilon);\r\n\r\n        return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\r\n    }\r\n\r\n    return [points[0], points[points.length - 1]];\r\n}\r\n\r\nexport default function RamerDouglasPeucker(points, ctx) {\r\n    if (points.length == 1) {\r\n        ctx.beginPath();\r\n        ctx.arc(points[0].x, points[0].y, Datas.Style.Stroke.Size / 2, 0, 2 * Math.PI, true);\r\n        ctx.fill();\r\n        return;\r\n    } else if (points.length == 2) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(points[0].x, points[0].y);\r\n        ctx.lineTo(points[1].x, points[1].y);\r\n        ctx.stroke();\r\n        return;\r\n    } else if (points.length == 0) return;\r\n\r\n    var simplifiedPoints = simplify(points, 5);\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}","function getTriangleArea(p1, p2, p3) {\r\n    return Math.abs((p1.x * (p2.y - p3.y) + p2.x * (p3.y - p1.y) + p3.x * (p1.y - p2.y)) / 2);\r\n}\r\n\r\nfunction simplifyVW(points, threshold) {\r\n    var areas = [];\r\n\r\n    // 计算每个点的三角形面积\r\n    for (var i = 1; i < points.length - 1; i++) {\r\n        var area = getTriangleArea(points[i - 1], points[i], points[i + 1]);\r\n        areas.push(area);\r\n    }\r\n\r\n    // 根据面积排序，并删除面积最小的点\r\n    while (areas.length > 0 && Math.min(...areas) < threshold) {\r\n        var minIndex = areas.indexOf(Math.min(...areas));\r\n        points.splice(minIndex + 1, 1);\r\n        areas.splice(minIndex, 1);\r\n    }\r\n\r\n    return points;\r\n}\r\n\r\nexport default function VisvalingamWhyatt(points, ctx) {\r\n    if (points.length == 1) {\r\n        ctx.beginPath();\r\n        ctx.arc(points[0].x, points[0].y, Datas.Style.Stroke.Size / 2, 0, 2 * Math.PI, true);\r\n        ctx.fill();\r\n        return;\r\n    } else if (points.length == 2) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(points[0].x, points[0].y);\r\n        ctx.lineTo(points[1].x, points[1].y);\r\n        ctx.stroke();\r\n        return;\r\n    } else if (points.length == 0) return;\r\n\r\n    var simplifiedPoints = simplifyVW(points, 1); // 调整阈值的值以控制简化程度\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(simplifiedPoints[0].x, simplifiedPoints[0].y);\r\n\r\n    for (var i = 1; i < simplifiedPoints.length - 1; i++) {\r\n        var xc = (simplifiedPoints[i].x + simplifiedPoints[i + 1].x) / 2;\r\n        var yc = (simplifiedPoints[i].y + simplifiedPoints[i + 1].y) / 2;\r\n        ctx.quadraticCurveTo(simplifiedPoints[i].x, simplifiedPoints[i].y, xc, yc);\r\n    }\r\n\r\n    ctx.lineTo(simplifiedPoints[simplifiedPoints.length - 1].x, simplifiedPoints[simplifiedPoints.length - 1].y);\r\n    ctx.stroke();\r\n}","\"use strict\";\r\n\r\nimport dragger from \"./dragger.min.js\";\r\nimport createHDCanvas from \"./hdcanvas.js\";\r\nimport DouglasPeucker from \"./DouglasPeucker.js\";\r\nimport RamerDouglasPeucker from \"./RamerDouglasPeucker.js\";\r\nimport VisvalingamWhyatt from \"./VisvalingamWhyatt.js\";\r\n// importScript(\"./lineWorker.js\");\r\n\r\nvar colors = ['rgb(0, 0, 0)', 'rgb(38, 38, 38)', 'rgb(89, 89, 89)', 'rgb(140, 140, 140)', 'rgb(191, 191, 191)', 'rgb(217, 217, 217)', 'rgb(233, 233, 233)', 'rgb(245, 245, 245)', 'rgb(250, 250, 250)', 'rgb(255, 255, 255)', 'rgb(225, 60, 57)', 'rgb(231, 95, 51)', 'rgb(235, 144, 58)', 'rgb(245, 219, 77)', 'rgb(114, 192, 64)', 'rgb(89, 191, 192)', 'rgb(66, 144, 247)', 'rgb(54, 88, 226)', 'rgb(106, 57, 201)', 'rgb(216, 68, 147)', 'rgb(251, 233, 230)', 'rgb(252, 237, 225)', 'rgb(252, 239, 212)', 'rgb(252, 251, 207)', 'rgb(231, 246, 213)', 'rgb(218, 244, 240)', 'rgb(217, 237, 250)', 'rgb(224, 232, 250)', 'rgb(237, 225, 248)', 'rgb(246, 226, 234)', 'rgb(255, 163, 158)', 'rgb(255, 187, 150)', 'rgb(255, 213, 145)', 'rgb(255, 251, 143)', 'rgb(183, 235, 143)', 'rgb(135, 232, 222)', 'rgb(145, 213, 255)', 'rgb(173, 198, 255)', 'rgb(211, 173, 247)', 'rgb(255, 173, 210)', 'rgb(255, 77, 79)', 'rgb(255, 122, 69)', 'rgb(255, 169, 64)', 'rgb(255, 236, 61)', 'rgb(115, 209, 61)', 'rgb(54, 207, 201)', 'rgb(64, 169, 255)', 'rgb(89, 126, 247)', 'rgb(146, 84, 222)', 'rgb(247, 89, 171)', 'rgb(207, 19, 34)', 'rgb(212, 56, 13)', 'rgb(212, 107, 8)', 'rgb(212, 177, 6)', 'rgb(56, 158, 13)', 'rgb(8, 151, 156)', 'rgb(9, 109, 217)', 'rgb(29, 57, 196)', 'rgb(83, 29, 171)', 'rgb(196, 29, 127)', 'rgb(130, 0, 20)', 'rgb(135, 20, 0)', 'rgb(135, 56, 0)', 'rgb(97, 71, 0)', 'rgb(19, 82, 0)', 'rgb(0, 71, 79)', 'rgb(0, 58, 140)', 'rgb(6, 17, 120)', 'rgb(34, 7, 94)', 'rgb(120, 6, 80)'];\r\n\r\nvar Datas = {\r\n    CanvasSize: {\r\n        width: 480,\r\n        height: 320\r\n    },\r\n    Objects: [],\r\n    Status: {\r\n        drawing: false,\r\n        mode: \"draw\",\r\n        selected: false,\r\n        dragging: false\r\n    },\r\n    Style: {\r\n        Stroke: {\r\n            Color: colors[36],\r\n            Size: 8\r\n        },\r\n        Fill: {\r\n            Color: \"#000\"\r\n        }\r\n    },\r\n    Temp: {\r\n        Mouse: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        Points: [],\r\n        Objects: [],\r\n        ExtremeValue: {\r\n            x: [0, 0],\r\n            y: [0, 0]\r\n        },\r\n        DIndex: 0,\r\n        History: []\r\n    },\r\n    Limit: {\r\n        max: 48,\r\n        min: 1\r\n    },\r\n    Algorithm: \"DouglasPeucker\"\r\n}\r\n\r\n/***********************************************************************\r\nObjects\r\n{\r\n    position: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    size: {\r\n        width: 0,\r\n        height: 0\r\n    },\r\n    style: {\r\n        strokeColor: \"#000\",\r\n        strokeWidth: \"#000\"\r\n    },\r\n    points: [],\r\n    image: \"image url\",\r\n    rotate: 0,\r\n    scale: 1\r\n}\r\n ***********************************************************************/\r\n\r\nvar $ = (s, a) => { return a == true ? document.querySelectorAll(s) : document.querySelector(s); };\r\n\r\nvar showActionPopup = false;\r\nvar focused_obj = null;\r\n\r\n$('[data-mode=\"select\"]').addEventListener(\"click\", () => {\r\n    Datas.Status.mode = \"select\";\r\n})\r\n\r\n$('[data-mode=\"draw\"]').addEventListener(\"click\", () => {\r\n    Datas.Status.mode = \"draw\";\r\n    focused_obj = null;\r\n    createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n})\r\n\r\ndocument.addEventListener(\"contextmenu\", (e) => {\r\n    e.preventDefault();\r\n})\r\n\r\nvar moving_selected_obj = false;\r\nvar selected_obj = null;\r\nvar selected_index = 0;\r\n\r\nwindow.addEventListener(\"keydown\", (e) => {\r\n    if (e.ctrlKey) {\r\n        e.preventDefault();\r\n        if (moving_selected_obj == true) {\r\n            return;\r\n        }\r\n        if (e.key == \"z\") {\r\n            return draw.undo();\r\n        } else if (e.key == \"y\") {\r\n            return draw.redo();\r\n        } else if (e.shiftKey && e.key == \"S\") {\r\n            return download();\r\n        }\r\n    }\r\n})\r\n\r\n$(\".action\", true).forEach(e => {\r\n    e.addEventListener(\"click\", () => {\r\n        showActionPopup = true;\r\n        $(\".action-popup.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n        $(`[action-popup=\"${e.getAttribute(\"data-action\")}\"]`).classList.add(\"active\");\r\n    });\r\n\r\n    e.addEventListener(\"mousemove\", () => {\r\n        if (showActionPopup == true) {\r\n            $(\".action-popup.active\", true).forEach(p => {\r\n                p.classList.remove(\"active\");\r\n            })\r\n            $(\".action.active\", true).forEach(p => {\r\n                p.classList.remove(\"active\");\r\n            })\r\n            e.classList.add(\"active\");\r\n            $(`[action-popup=\"${e.getAttribute(\"data-action\")}\"]`).classList.add(\"active\");\r\n        }\r\n    });\r\n});\r\n\r\ndocument.addEventListener(\"mousedown\", (e) => {\r\n    var t = false;\r\n    $(\".action\", true).forEach(a => {\r\n        if (a.contains(e.target)) {\r\n            t = true;\r\n        }\r\n    })\r\n    if (t == true) return;\r\n    var has = false;\r\n    $(\".action.popup\", true).forEach(p => {\r\n        if (p.contains(e.target)) {\r\n            has = true;\r\n        }\r\n    })\r\n    if (has == false && showActionPopup == true) {\r\n        showActionPopup = false;\r\n        $(\".action.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n        $(\".action-popup.active\", true).forEach(a => {\r\n            a.classList.remove(\"active\");\r\n        })\r\n    }\r\n})\r\n\r\n\r\n$(\".mode\", true).forEach(mode => {\r\n    mode.addEventListener(\"click\", () => {\r\n        $(\".mode.active\", true).forEach(active => {\r\n            active.classList.remove(\"active\");\r\n        })\r\n        $(\".mode-popup.active\", true).forEach(popup => {\r\n            popup.classList.remove(\"active\");\r\n        })\r\n        mode.classList.add(\"active\");\r\n        mode.querySelector(\".mode-popup\") ? mode.querySelector(\".mode-popup\").classList.add(\"active\") : null;\r\n    })\r\n\r\n    /*e.addEventListener(\"click\", (evt) => {\r\n        if (e.getAttribute(\"data-popup\")) {\r\n            if (!$(`[popup-name=\"${e.getAttribute(\"data-popup\")}\"]`).contains(evt.target)) {\r\n                $(`[popup-name=\"${e.getAttribute(\"data-popup\")}\"]`).classList.toggle(\"active\");\r\n            }\r\n        }\r\n    });*/\r\n});\r\n\r\ndocument.addEventListener(\"mousedown\", (e) => {\r\n    var popup = false;\r\n    var trigger = false;\r\n    $(\"[popup-name]\", true).forEach(p => {\r\n        if (p.contains(e.target)) {\r\n            popup = true;\r\n        }\r\n    })\r\n    $(\".mode\", true).forEach(m => {\r\n        if (m.contains(e.target)) {\r\n            trigger = true;\r\n        }\r\n    })\r\n    if (popup == false) {\r\n        if (trigger == true) return;\r\n        $(\".mode-popup.active\", true).forEach(p => {\r\n            p.classList.remove(\"active\");\r\n        })\r\n    }\r\n});\r\n\r\n$(\"#size\").value = Datas.Style.Stroke.Size;\r\n\r\n$(\"#size\").addEventListener(\"change\", () => {\r\n    if ($(\"#size\").value < Datas.Limit.min) {\r\n        $(\"#size\").value = Datas.Limit.min;\r\n    }\r\n    if ($(\"#size\").value > Datas.Limit.max) {\r\n        $(\"#size\").value = Datas.Limit.max;\r\n    }\r\n    Datas.Style.Stroke.Size = $(\"#size\").value;\r\n});\r\n\r\n$(\"#preview-color\").style.background = Datas.Style.Stroke.Color;\r\n\r\n$(\"[data-select-group-parent]\", true).forEach(g => {\r\n    $(`[data-select-group=\"${g.getAttribute(\"data-select-group-parent\")}\"]`, true).forEach(s => {\r\n        s.addEventListener(\"click\", () => {\r\n            $(`[data-select-group=\"${s.getAttribute(\"data-select-group\")}\"].selected`, true).forEach(sed => {\r\n                sed.classList.remove(\"selected\");\r\n            })\r\n            s.classList.add(\"selected\");\r\n            Datas.Algorithm = s.getAttribute(\"data-select-value\");\r\n        })\r\n    })\r\n})\r\n\r\ncolors.forEach((c, i) => {\r\n    var li = document.createElement(\"li\");\r\n    li.setAttribute(\"data-value\", c);\r\n    li.className = \"color-block\";\r\n    li.innerHTML = `<div class=\"color-block-inner\" style=\"background-color: ${c}\"></div>`;\r\n    li.addEventListener(\"click\", () => {\r\n        $(\"#preview-color\").style.background = c;\r\n        Datas.Style.Stroke.Color = c;\r\n    })\r\n    $(\"#colors\").appendChild(li);\r\n})\r\n\r\nfunction drawPoints(el, value, b, a) {\r\n    var canvas = el;\r\n    var data = value;\r\n    if (b != true) {\r\n        createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    }\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (a == 1) {\r\n        ctx.lineWidth = Datas.Style.Stroke.Size;\r\n        ctx.strokeStyle = Datas.Style.Stroke.Color;\r\n        ctx.fillStyle = Datas.Style.Stroke.Color;\r\n        var temp = data;\r\n        data = {};\r\n        data.points = temp;\r\n        data.algorithm = Datas.Algorithm;\r\n    } else {\r\n        ctx.lineWidth = data.style.strokeWidth;\r\n        ctx.strokeStyle = data.style.strokeColor;\r\n        ctx.fillStyle = Datas.Style.Stroke.Color;\r\n    }\r\n    ctx.imageSmoothingEnabled = true;\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineCap = \"round\";\r\n    if (b == true) {\r\n        if (data.algorithm == \"RamerDouglasPeucker\") {\r\n            return RamerDouglasPeucker(data.points, ctx);\r\n        } else if (data.algorithm == \"DouglasPeucker\") {\r\n            return DouglasPeucker(data.points, ctx)\r\n        } else if (data.algorithm == \"VisvalingamWhyatt\") {\r\n            return VisvalingamWhyatt(data.points, ctx)\r\n        } else {\r\n\r\n        }\r\n    }\r\n    try {\r\n        if (data.points.length == 0) return;\r\n        if (data.points.length == 1) {\r\n            ctx.beginPath();\r\n            ctx.arc(data.points[0].x, data.points[0].y, Datas.Style.Stroke.Size / 2, 0, 2 * Math.PI, true);\r\n            ctx.fill();\r\n            return;\r\n        } else if (data.points.length == 2) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(data.points[0].x, data.points[0].y);\r\n            ctx.lineTo(data.points[1].x, data.points[1].y);\r\n            ctx.stroke();\r\n            return;\r\n        } else {\r\n            for (let i = 0; i < data.points.length - 1; i++) {\r\n                ctx.beginPath();\r\n                if (i == 0) {\r\n                    ctx.moveTo(data.points[i].x, data.points[i].y)\r\n                    ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i + 1].x + (data.points[i + 2].x - data.points[i + 1].x) / 2, data.points[i + 1].y + (data.points[i + 2].y - data.points[i + 1].y) / 2);\r\n                } else if (i == data.points.length - 2) {\r\n                    ctx.moveTo(data.points[i].x + (data.points[i + 1].x - data.points[i].x) / 2, data.points[i].y + (data.points[i + 1].y - data.points[i].y) / 2)\r\n                    ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i].x + (data.points[i + 1].x - data.points[i].x) * 0.75, data.points[i].y + (data.points[i + 1].y - data.points[i].y) * 0.75);\r\n                } else {\r\n                    ctx.moveTo(data.points[i].x + (data.points[i + 1].x - data.points[i].x) / 2, data.points[i].y + (data.points[i + 1].y - data.points[i].y) / 2)\r\n                    ctx.quadraticCurveTo(data.points[i + 1].x, data.points[i + 1].y, data.points[i + 1].x + (data.points[i + 2].x - data.points[i + 1].x) / 2, data.points[i + 1].y + (data.points[i + 2].y - data.points[i + 1].y) / 2);\r\n                }\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    } catch (e) {\r\n        console.log(\"Error :\", e)\r\n    }\r\n}\r\n\r\nfunction getPosition(element) {\r\n    function offset(el) {\r\n        var rect = el.getBoundingClientRect(),\r\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\r\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n        return { top: rect.top + scrollTop, left: rect.left + scrollLeft }\r\n    }\r\n    return { x: offset(element).left, y: offset(element).top };\r\n}\r\n\r\nfunction findMaxArea() {\r\n    var points = Datas.Objects;\r\n    if (points.length < 1) return {\r\n        sx: 0,\r\n        sy: 0,\r\n        ex: 0,\r\n        ey: 0\r\n    };\r\n    var values = {\r\n        minX: points[0][\"ExtremeValue\"].x[0],\r\n        minY: points[0][\"ExtremeValue\"].y[0],\r\n        maxX: points[0][\"ExtremeValue\"].x[1],\r\n        maxY: points[0][\"ExtremeValue\"].y[1]\r\n    }\r\n    points.forEach(point => {\r\n        if (point[\"ExtremeValue\"].x[0] <= values.minX) {\r\n            values.minX = point[\"ExtremeValue\"].x[0]\r\n        }\r\n        if (point[\"ExtremeValue\"].x[1] >= values.maxX) {\r\n            values.maxX = point[\"ExtremeValue\"].x[1]\r\n        }\r\n        if (point[\"ExtremeValue\"].y[0] <= values.minY) {\r\n            values.minY = point[\"ExtremeValue\"].y[0]\r\n        }\r\n        if (point[\"ExtremeValue\"].y[1] >= values.maxY) {\r\n            values.maxY = point[\"ExtremeValue\"].y[1]\r\n        }\r\n    })\r\n    return {\r\n        sx: values.minX,\r\n        ex: values.maxX,\r\n        sy: values.minY,\r\n        ey: values.maxY\r\n    };\r\n}\r\n\r\nfunction drawObjectBorder(element, ExtremeValue, focused = false, clear = true) {\r\n    if (clear == true) {\r\n        createHDCanvas(element, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n    }\r\n    var ctx = element.getContext(\"2d\");\r\n    ctx.beginPath();\r\n\r\n    /*\r\n    if (focused == true) {\r\n        ctx.shadowColor = \"rgb(67 149 239)\";\r\n        ctx.shadowBlur = 2;\r\n    } else {\r\n        ctx.shadowColor = \"\";\r\n        ctx.shadowBlur = 0;\r\n    }\r\n    */\r\n\r\n    ctx.fillStyle = \"rgb(178,204,255)\";        // rgb(178,204,255)\r\n    ctx.lineWidth = focused == true ? 1 : 1.5;\r\n    ctx.strokeStyle = \"rgb(178,204,255)\";      // rgb(178,204,255)\r\n    ctx.moveTo(ExtremeValue.x[0], ExtremeValue.y[0]);\r\n    ctx.lineTo(ExtremeValue.x[1], ExtremeValue.y[0]);\r\n    ctx.lineTo(ExtremeValue.x[1], ExtremeValue.y[1]);\r\n    ctx.lineTo(ExtremeValue.x[0], ExtremeValue.y[1]);\r\n    ctx.lineTo(ExtremeValue.x[0], ExtremeValue.y[0]);\r\n    ctx.stroke();\r\n\r\n    var completed = false;\r\n\r\n    if (focused == true && completed == true) {\r\n        // Resize blocks\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] + (ExtremeValue.x[1] - ExtremeValue.x[0]) / 2 - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] + (ExtremeValue.x[1] - ExtremeValue.x[0]) / 2 - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[0] - 5, ExtremeValue.y[0] + (ExtremeValue.y[1] - ExtremeValue.y[0]) / 2 - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[0] + (ExtremeValue.y[1] - ExtremeValue.y[0]) / 2 - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[0] - 5, 10, 10);\r\n        ctx.fillRect(ExtremeValue.x[1] - 5, ExtremeValue.y[1] - 5, 10, 10);\r\n    }\r\n\r\n    ctx.closePath();\r\n}\r\n\r\nvar draw = {\r\n    currentIndex: -1,\r\n    canvas: $(\"#canvas\"),\r\n    image: $(\"#image\"),\r\n    select: $(\"#select\"),\r\n    mp: $(\"#mp\"),\r\n    mask: $(\"#mask\"),\r\n    init: async () => {\r\n        $(\"#painter\").classList.remove(\"unloaded\");\r\n        mask.style = `width: ${Datas.CanvasSize.width}px; min-width: calc(4rem + ${Datas.CanvasSize.width}px); min-height: calc(4rem + ${Datas.CanvasSize.height}px)`;\r\n        canvas.hidden = false;\r\n        image.hidden = false;\r\n        mp.hidden = false;\r\n        select.hidden = false;\r\n        createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n        var selectEvent = dragger(\"#canvas\");\r\n\r\n        var select_mouse = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        selectEvent.On(\"dragstart\", (e) => {\r\n            if (Datas.Status.mode == \"select\") {\r\n                var points = Datas.Objects;\r\n                if (points.length < 1) return;\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                var mouse = { x: e.clientX - getPosition(select).x, y: e.clientY - getPosition(select).y };\r\n                select_mouse = {\r\n                    x: e.clientX,\r\n                    y: e.clientY\r\n                }\r\n                var v = false;\r\n                var sp = findMaxArea();\r\n                selected_obj = points[0];\r\n                selected_index = 0;\r\n                points.forEach((p, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    if (p[\"ExtremeValue\"].x[0] < mouse.x && mouse.x < p[\"ExtremeValue\"].x[1] && p[\"ExtremeValue\"].y[0] < mouse.y && mouse.y < p[\"ExtremeValue\"].y[1]) {\r\n                        v = true;\r\n                        if ((sp.ex - sp.sx) * (sp.ey - sp.sy) >= (p[\"ExtremeValue\"].x[1] - p[\"ExtremeValue\"].x[0]) * (p[\"ExtremeValue\"].y[1] - p[\"ExtremeValue\"].y[0])) {\r\n                            selected_obj = p;\r\n                            selected_index = i;\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            /*\r\n                            if (p[\"ExtremeValue\"].x[0] < sp.sx) {\r\n                                sp.sx = p[\"ExtremeValue\"].x[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].x[1] > sp.ex) {\r\n                                sp.ex = p[\"ExtremeValue\"].x[1];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[0] < sp.sy) {\r\n                                sp.sy = p[\"ExtremeValue\"].y[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[1] > sp.ey) {\r\n                                sp.ey = p[\"ExtremeValue\"].y[1];\r\n                            }\r\n                            */\r\n                        } else {\r\n                            /*\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            */\r\n                        }\r\n                    }\r\n\r\n                })\r\n                if (v == false) {\r\n                    focused_obj = null;\r\n                    createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                    return\r\n                };\r\n                focused_obj = selected_obj;\r\n                moving_selected_obj = true;\r\n                var temp_objs = [...Datas.Objects];\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                temp_objs.splice(selected_index, 1);\r\n                temp_objs.forEach((points, i) => {\r\n                    if (i > draw.currentIndex - 1) return;\r\n                    drawPoints(image, points, true);\r\n                });\r\n                drawPoints(mp, Datas.Objects[selected_index], true);\r\n                drawObjectBorder(select, Datas.Objects[selected_index].ExtremeValue, true);\r\n            }\r\n        })\r\n\r\n        selectEvent.On(\"dragmove\", (e) => { selectMove(e); });\r\n\r\n        selectEvent.On(\"dragend\", (e) => { selectEnd(e); });\r\n        selectEvent.On(\"dragout\", (e) => { selectEnd(e); });\r\n\r\n        function selectEnd(e) {\r\n            if (moving_selected_obj == true) {\r\n                Datas.Objects[selected_index] = selected_obj;\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                Datas.Objects.forEach((points, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    drawPoints(image, points, true);\r\n                });\r\n                Datas.Status.drawing = false;\r\n            }\r\n            selected_obj = null;\r\n            moving_selected_obj = false;\r\n        }\r\n\r\n        function selectMove(e) {\r\n            if (moving_selected_obj == true) {\r\n                createHDCanvas(mp, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                selected_obj.points.forEach((point, i) => {\r\n                    selected_obj.points[i] = {\r\n                        x: point.x + e.clientX - select_mouse.x,\r\n                        y: point.y + e.clientY - select_mouse.y\r\n                    }\r\n                })\r\n                selected_obj.ExtremeValue.x[0] += e.clientX - select_mouse.x;\r\n                selected_obj.ExtremeValue.x[1] += e.clientX - select_mouse.x;\r\n                selected_obj.ExtremeValue.y[0] += e.clientY - select_mouse.y;\r\n                selected_obj.ExtremeValue.y[1] += e.clientY - select_mouse.y;\r\n\r\n                drawPoints(mp, selected_obj, true);\r\n                drawObjectBorder(select, selected_obj.ExtremeValue, true);\r\n\r\n                // console.log(selected_obj.algorithm)\r\n\r\n                select_mouse = {\r\n                    x: e.clientX,\r\n                    y: e.clientY\r\n                }\r\n            }\r\n        }\r\n\r\n        canvas.addEventListener(\"mousemove\", (e) => {\r\n            if (Datas.Status.mode == \"select\" && moving_selected_obj == false) {\r\n                var points = [...Datas.Objects];\r\n                if (points.length < 1) return;\r\n                createHDCanvas(select, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n                var mouse = { x: e.clientX - getPosition(select).x, y: e.clientY - getPosition(select).y };\r\n                var v = false;\r\n                var sp = findMaxArea();\r\n                var overed = points[0];\r\n                points.forEach((p, i) => {\r\n                    if (i > draw.currentIndex) return;\r\n                    if (p[\"ExtremeValue\"].x[0] < mouse.x && mouse.x < p[\"ExtremeValue\"].x[1] && p[\"ExtremeValue\"].y[0] < mouse.y && mouse.y < p[\"ExtremeValue\"].y[1]) {\r\n                        v = true;\r\n                        if ((sp.ex - sp.sx) * (sp.ey - sp.sy) > (p[\"ExtremeValue\"].x[1] - p[\"ExtremeValue\"].x[0]) * (p[\"ExtremeValue\"].y[1] - p[\"ExtremeValue\"].y[0])) {\r\n                            overed = p;\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            /*\r\n                            if (p[\"ExtremeValue\"].x[0] < sp.sx) {\r\n                                sp.sx = p[\"ExtremeValue\"].x[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].x[1] > sp.ex) {\r\n                                sp.ex = p[\"ExtremeValue\"].x[1];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[0] < sp.sy) {\r\n                                sp.sy = p[\"ExtremeValue\"].y[0];\r\n                            }\r\n                            if (p[\"ExtremeValue\"].y[1] > sp.ey) {\r\n                                sp.ey = p[\"ExtremeValue\"].y[1];\r\n                            }\r\n                            */\r\n                        } else {\r\n                            /*\r\n                            sp = {\r\n                                sx: p[\"ExtremeValue\"].x[0],\r\n                                sy: p[\"ExtremeValue\"].y[0],\r\n                                ex: p[\"ExtremeValue\"].x[1],\r\n                                ey: p[\"ExtremeValue\"].y[1]\r\n                            }\r\n                            */\r\n                        }\r\n                    }\r\n\r\n                })\r\n                if (focused_obj != null) {\r\n                    drawObjectBorder(select, focused_obj.ExtremeValue, true);\r\n                }\r\n                if (v == false) return;\r\n                var ExtremeValue = {\r\n                    x: [sp.sx, sp.ex],\r\n                    y: [sp.sy, sp.ey]\r\n                }\r\n                if (focused_obj != overed) {\r\n                    drawObjectBorder(select, ExtremeValue, false, false);\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        })\r\n\r\n        function move(e) {\r\n            if (e.type == \"touchmove\") {\r\n                e.preventDefault();\r\n            }\r\n            if (Datas.Status.drawing == true && Datas.Status.mode == \"draw\") {\r\n                if (e.clientX - getPosition(canvas).x < Datas.Temp.ExtremeValue.x[0]) {\r\n                    Datas.Temp.ExtremeValue.x[0] = e.clientX - getPosition(canvas).x;\r\n                }\r\n                if (e.clientX - getPosition(canvas).x > Datas.Temp.ExtremeValue.x[1]) {\r\n                    Datas.Temp.ExtremeValue.x[1] = e.clientX - getPosition(canvas).x;\r\n                }\r\n                if (e.clientY - getPosition(canvas).y < Datas.Temp.ExtremeValue.y[0]) {\r\n                    Datas.Temp.ExtremeValue.y[0] = e.clientY - getPosition(canvas).y;\r\n                }\r\n                if (e.clientY - getPosition(canvas).y > Datas.Temp.ExtremeValue.y[1]) {\r\n                    Datas.Temp.ExtremeValue.y[1] = e.clientY - getPosition(canvas).y;\r\n                };\r\n\r\n                Datas.Temp.Points.push({ x: e.clientX - getPosition(canvas).x, y: e.clientY - getPosition(canvas).y });\r\n\r\n                Datas.Temp.Mouse = {\r\n                    x: [e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y]\r\n                };\r\n\r\n                $(\"#undo\").removeAttribute(\"disabled\");\r\n\r\n                drawPoints(canvas, Datas.Temp.Points, false, 1);\r\n            }\r\n        }\r\n\r\n        function leave(e) {\r\n            if (e.type == \"touchend\") {\r\n                // e.preventDefault();\r\n            }\r\n            if (Datas.Status.drawing == true && Datas.Status.mode == \"draw\") {\r\n                createHDCanvas(canvas, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n                if (Datas.Temp.DIndex != 0) {\r\n                    Datas.Objects = Datas.Temp.History;\r\n\r\n                    createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n\r\n                    Datas.Objects.forEach(o => {\r\n                        drawPoints(image, o, true);\r\n                    });\r\n\r\n                    Datas.Temp.DIndex = 0;\r\n\r\n                    Datas.Temp.History = [];\r\n                }\r\n\r\n                draw.currentIndex++;\r\n\r\n                var padding = 4;\r\n\r\n                Datas.Temp.ExtremeValue.x[0] -= Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.x[1] += Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.y[0] -= Datas.Style.Stroke.Size / 2 + padding;\r\n                Datas.Temp.ExtremeValue.y[1] += Datas.Style.Stroke.Size / 2 + padding;\r\n\r\n                Datas.Status.drawing = false;\r\n                Datas.Objects.push({\r\n                    position: {\r\n                        x: Datas.Temp.ExtremeValue.x[0],\r\n                        y: Datas.Temp.ExtremeValue.y[0]\r\n                    },\r\n                    size: {\r\n                        width: Datas.Temp.ExtremeValue.x[1] - Datas.Temp.ExtremeValue.x[0],\r\n                        height: Datas.Temp.ExtremeValue.y[1] - Datas.Temp.ExtremeValue.y[0]\r\n                    },\r\n                    style: {\r\n                        strokeColor: Datas.Style.Stroke.Color,\r\n                        strokeWidth: Datas.Style.Stroke.Size\r\n                    },\r\n                    algorithm: Datas.Algorithm,\r\n                    points: Datas.Temp.Points,\r\n                    image: \"image url\",\r\n                    rotate: 0,\r\n                    scale: 1,\r\n                    ExtremeValue: Datas.Temp.ExtremeValue\r\n                });\r\n                drawPoints(image, Datas.Temp.Points, true, 1);\r\n                $(\"#redo\").setAttribute(\"disabled\", \"\");\r\n            }\r\n        }\r\n\r\n        var drawingEvent = dragger(\"#canvas\");\r\n\r\n        drawingEvent.On(\"dragstart\", (e) => {\r\n            if (e.type == \"touchstart\") {\r\n                e.preventDefault();\r\n            }\r\n            if (Datas.Status.mode == \"draw\") {\r\n                Datas.Status.drawing = true;\r\n                Datas.Temp.Points = [{ x: e.clientX - getPosition(canvas).x, y: e.clientY - getPosition(canvas).y }];\r\n                Datas.Temp.Mouse = {\r\n                    x: [e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y]\r\n                };\r\n                Datas.Temp.ExtremeValue = {\r\n                    x: [e.clientX - getPosition(canvas).x, e.clientX - getPosition(canvas).x],\r\n                    y: [e.clientY - getPosition(canvas).y, e.clientY - getPosition(canvas).y]\r\n                };\r\n                drawPoints(canvas, Datas.Temp.Points, false, 1);\r\n            }\r\n        });\r\n\r\n        drawingEvent.On(\"dragmove\", (e) => { move(e); });\r\n\r\n        drawingEvent.On(\"dragend\", (e) => { leave(e); });\r\n        drawingEvent.On(\"dragout\", (e) => { leave(e); });\r\n    },\r\n    undo: () => {\r\n        if (draw.currentIndex == -1) return $(\"#undo\").setAttribute(\"disabled\", \"\");\r\n        draw.currentIndex--;\r\n        Datas.Temp.DIndex--;\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        Datas.Temp.History = [];\r\n        Datas.Objects.forEach((o, i) => {\r\n            if (i > draw.currentIndex) return;\r\n            drawPoints(image, o, true);\r\n            Datas.Temp.History.push(o);\r\n        });\r\n        if (draw.currentIndex == -1) {\r\n            $(\"#undo\").setAttribute(\"disabled\", \"\")\r\n        } else {\r\n            $(\"#undo\").removeAttribute(\"disabled\");\r\n        }\r\n        $(\"#redo\").removeAttribute(\"disabled\");\r\n    },\r\n    redo: () => {\r\n        if (draw.currentIndex == Datas.Objects.length - 1) return $(\"#redo\").setAttribute(\"disabled\", \"\");\r\n        draw.currentIndex++;\r\n        Datas.Temp.DIndex++;\r\n        createHDCanvas(image, Datas.CanvasSize.width, Datas.CanvasSize.height);\r\n        Datas.Temp.History = [];\r\n        Datas.Objects.forEach((o, i) => {\r\n            if (i > draw.currentIndex) return;\r\n            drawPoints(image, o, true);\r\n            Datas.Temp.History.push(o);\r\n        });\r\n        $(\"#undo\").removeAttribute(\"disabled\");\r\n        if (draw.currentIndex == Datas.Objects.length - 1) {\r\n            $(\"#redo\").setAttribute(\"disabled\", \"\")\r\n        } else {\r\n            $(\"#redo\").removeAttribute(\"disabled\");\r\n        }\r\n    }\r\n}\r\n\r\nfunction download(name) {\r\n    var image = draw.image.toDataURL('image/jpeg');\r\n    var link = document.createElement('a');\r\n    link.download = name ? name + \".jpg\" : 'Untitled.jpg';\r\n    link.href = image;\r\n    link.click();\r\n}\r\n\r\n$(\"#download\").addEventListener(\"click\", () => { download(); });\r\n\r\nvar delay = (d) => { return new Promise(r => setTimeout(r, d)); };\r\n\r\nwindow.mobileAndTabletCheck = function () {\r\n    let check = false;\r\n    (function (a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n    return check;\r\n};\r\n\r\nwindow.onload = async () => {\r\n    /*\r\n    if (mobileAndTabletCheck() == true) {\r\n        var info = document.createElement(\"div\");\r\n        info.className = \"--info\";\r\n        info.innerHTML = \"<div>請使用電腦瀏覽此頁面</div>\";\r\n        document.body.appendChild(info);\r\n        return;\r\n    }\r\n    */\r\n\r\n    await delay(Math.random() * 500);\r\n\r\n    draw.init();\r\n\r\n    $(\"#undo\").onclick = draw.undo;\r\n    $(\"#redo\").onclick = draw.redo;\r\n\r\n    setTimeout(() => $(\".unloaded\", true).forEach(e => {\r\n        e.classList.remove(\"unloaded\");\r\n    }), 300);\r\n}"],"names":["$","e","t","document","querySelectorAll","querySelector","console","warn","Object","prototype","toString","call","r","n","blur","window","end","move","o","dragstart","target","event","dragmove","dragend","dragout","g","dragin","dragover","On","hasOwnProperty","forEach","addEventListener","When","Toggle","dragging","createHDCanvas","canvas","w","h","ratio","devicePixelRatio","width","height","style","getContext","scale","getDistance","pt","lineStart","lineEnd","dx","x","dy","y","normalLength","Math","sqrt","distance","abs","DouglasPeucker","points","ctx","length","beginPath","arc","Datas","Style","Stroke","Size","PI","fill","moveTo","lineTo","stroke","simplifiedPoints","epsilon","start","i","point","push","simplifyDP","xc","yc","quadraticCurveTo","simplify","dmax","index","d","left","slice","right","simplifiedLeft","simplifiedRight","concat","RamerDouglasPeucker","VisvalingamWhyatt","threshold","p1","p2","p3","areas","area","min","minIndex","indexOf","splice","simplifyVW","colors","CanvasSize","Objects","Status","drawing","mode","selected","Color","Fill","Temp","Mouse","Points","ExtremeValue","DIndex","History","Limit","max","Algorithm","s","a","showActionPopup","focused_obj","mp","select","preventDefault","moving_selected_obj","selected_obj","selected_index","drawPoints","el","value","b","data","lineWidth","strokeStyle","fillStyle","temp","algorithm","strokeWidth","strokeColor","imageSmoothingEnabled","lineJoin","lineCap","log","getPosition","element","offset","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","scrollTop","pageYOffset","top","findMaxArea","sx","sy","ex","ey","values","minX","minY","maxX","maxY","drawObjectBorder","focused","clear","closePath","ctrlKey","key","draw","undo","redo","shiftKey","download","p","classList","remove","getAttribute","add","contains","has","active","popup","trigger","m","background","sed","c","li","createElement","setAttribute","className","innerHTML","appendChild","currentIndex","image","mask","init","async","hidden","selectEvent","select_mouse","selectEnd","leave","type","position","size","rotate","mouse","clientX","clientY","v","sp","temp_objs","selectMove","overed","drawingEvent","removeAttribute","name","toDataURL","link","href","click","mobileAndTabletCheck","check","navigator","userAgent","vendor","opera","test","substr","onload","random","Promise","setTimeout","onclick"],"sourceRoot":""}